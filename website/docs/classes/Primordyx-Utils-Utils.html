<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
            <title>Primordyx Framework Documentation</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/template.js"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">Primordyx Framework Documentation</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -three phpdocumentor-sidebar">
                    <section class="phpdocumentor-sidebar__category -namespaces">
            <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/primordyxcli.html" class="">PrimordyxCLI</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/primordyx.html" class="">Primordyx</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="namespaces/primordyx-config.html" class="">Config</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-data.html" class="">Data</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-database.html" class="">Database</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-events.html" class="">Events</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-geo.html" class="">Geo</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-http.html" class="">Http</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-mail.html" class="">Mail</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-routing.html" class="">Routing</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-security.html" class="">Security</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-system.html" class="">System</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-time.html" class="">Time</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-utils.html" class="">Utils</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-view.html" class="">View</a>
                
            </li>
            </ul>

                        </section>
                <section class="phpdocumentor-sidebar__category -packages">
            <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Primordyx.html" class="">Primordyx</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Application.html" class="">Application</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/PrimordyxExamples.html" class="">PrimordyxExamples</a>
</h4>

                        </section>
            
    <section class="phpdocumentor-sidebar__category -reports">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category -indices">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -nine phpdocumentor-content">
                                <section>
                                        <ul class="phpdocumentor-breadcrumbs">
            <li class="phpdocumentor-breadcrumb"><a href="namespaces/primordyx.html">Primordyx</a></li>
            <li class="phpdocumentor-breadcrumb"><a href="namespaces/primordyx-utils.html">Utils</a></li>
    </ul>

    <article class="phpdocumentor-element -class">
        <h2 class="phpdocumentor-content__title">
    Utils

    
            <div class="phpdocumentor-element__package">
            in package
            <ul class="phpdocumentor-breadcrumbs">
                                    <li class="phpdocumentor-breadcrumb"><a href="packages/Primordyx.html">Primordyx</a></li>
                            </ul>
        </div>
    
    
    </h2>

<div class="phpdocumentor-label-line">


</div>

        <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Utils/Utils.php"><a href="files/src-utils-utils.html"><abbr title="src/Utils/Utils.php">Utils.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">97</span>

    </aside>

            <p class="phpdocumentor-summary">Multi-purpose utility class for HTTP responses, data formatting, and file operations</p>


    <section class="phpdocumentor-description"><p>Comprehensive collection of static utility methods for common web application tasks
including JSON API responses, CSV data export, configuration parsing, file sequence
management, and directory operations. Designed to reduce code duplication and provide
consistent interfaces for frequent programming tasks.</p>
<h2>Response Utilities</h2>
<ul>
<li><strong>JSON API Responses</strong>: Standardized JSON output with HTTP status codes and headers</li>
<li><strong>Content-Type Management</strong>: Automatic header setting for proper MIME types</li>
<li><strong>HTTP Status Integration</strong>: Works with HttpStatus class for proper status codes</li>
<li><strong>Script Termination</strong>: Controlled exit after response delivery</li>
</ul>
<h2>Data Format Utilities</h2>
<ul>
<li><strong>CSV Generation</strong>: Convert arrays to CSV format with customizable delimiters</li>
<li><strong>Configuration Parsing</strong>: Parse pipe-delimited INI-style configuration strings</li>
<li><strong>Type Conversion</strong>: Automatic type casting for numeric values</li>
<li><strong>Header Management</strong>: Automatic CSV header generation from array keys</li>
</ul>
<h2>File System Utilities</h2>
<ul>
<li><strong>Sequence Management</strong>: Generate next available numbers in file naming patterns</li>
<li><strong>Directory Creation</strong>: Ensure directory structure exists for file operations</li>
<li><strong>Path Validation</strong>: Safe directory and file path handling</li>
<li><strong>Permission Management</strong>: Configurable directory permissions</li>
</ul>
<h2>Design Philosophy</h2>
<ul>
<li><strong>Static Interface</strong>: All methods static for convenience and consistency</li>
<li><strong>Error Handling</strong>: Graceful error handling with exceptions for critical failures</li>
<li><strong>No Side Effects</strong>: Pure functions where possible, clear side effects where necessary</li>
<li><strong>Framework Integration</strong>: Works seamlessly with other Primordyx components</li>
</ul>
<h2>Common Usage Patterns</h2>
<p>Utils serves as the &quot;Swiss Army knife&quot; for common operations that don't warrant
separate classes but occur frequently across applications. Methods are designed
to be called directly without instantiation and handle edge cases gracefully.</p>
</section>


    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Utils-Utils.html#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>API Response Patterns</p>
<pre class="prettyprint"><code class="language-php">// Standard success response
Utils::sendJson(['status' =&gt; 'success', 'data' =&gt; $results]);

// Error response with custom status code
Utils::sendJson(['error' =&gt; 'Not found'], 404);

// Response with custom headers
Utils::sendJson($data, 200, ['X-Custom-Header' =&gt; 'value']);
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Data Export and Configuration</p>
<pre class="prettyprint"><code class="language-php">// Export array data to CSV
$csvString = Utils::toCsv($userRecords);
file_put_contents('users.csv', $csvString);

// Parse configuration string
$config = Utils::parseToAssocArray('timeout=30|retries=3|debug=1');
// Result: ['timeout' =&gt; 30, 'retries' =&gt; 3, 'debug' =&gt; 1]
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>File Management</p>
<pre class="prettyprint"><code class="language-php">// Get next file number in sequence
$nextNum = Utils::getNextFileSequenceNumber('/uploads/file_###.jpg');
// If file_001.jpg and file_003.jpg exist, returns 4

// Ensure directory exists before file write
Utils::ensureDirectoryForFile('/var/log/app/debug.log');
file_put_contents('/var/log/app/debug.log', $logData);
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Http-HttpStatus.html"><abbr title="\Primordyx\Http\HttpStatus">HttpStatus</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For HTTP status code management</p>
</section>

                                    </dd>
                                            </dl>





<h3 id="toc">
    Table of Contents
    <a href="classes/Primordyx-Utils-Utils.html#toc" class="headerlink"><i class="fas fa-link"></i></a>

</h3>










<h4 id="toc-methods">
    Methods
    <a href="classes/Primordyx-Utils-Utils.html#toc-methods" class="headerlink"><i class="fas fa-link"></i></a>

</h4>
<dl class="phpdocumentor-table-of-contents">
            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Utils-Utils.html#method_ensureDirectoryForFile">ensureDirectoryForFile()</a>
    <span>
                                &nbsp;: bool    </span>
</dt>
<dd>Create directory structure for file path to prevent write failures</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Utils-Utils.html#method_getNextFileSequenceNumber">getNextFileSequenceNumber()</a>
    <span>
                                &nbsp;: int    </span>
</dt>
<dd>Calculate next available sequence number for patterned file naming</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Utils-Utils.html#method_parseToAssocArray">parseToAssocArray()</a>
    <span>
                                &nbsp;: array&lt;int, mixed&gt;    </span>
</dt>
<dd>Parse pipe-delimited INI-style string into associative array with type conversion</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Utils-Utils.html#method_sendJson">sendJson()</a>
    <span>
                                &nbsp;: never    </span>
</dt>
<dd>Convenient alias for sendJsonResponse() with identical functionality</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Utils-Utils.html#method_sendJsonResponse">sendJsonResponse()</a>
    <span>
                                &nbsp;: never    </span>
</dt>
<dd>Send JSON response with HTTP status code and terminate script execution</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Utils-Utils.html#method_toCsv">toCsv()</a>
    <span>
                                &nbsp;: string    </span>
</dt>
<dd>Convert two-dimensional array to CSV-formatted string with automatic headers</dd>

    </dl>



        

        

            <section class="phpdocumentor-methods">
        <h3 class="phpdocumentor-elements__header" id="methods">
            Methods
            <a href="classes/Primordyx-Utils-Utils.html#methods" class="headerlink"><i class="fas fa-link"></i></a>

        </h3>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                    -static                    "
>
    <h4 class="phpdocumentor-element__name" id="method_ensureDirectoryForFile">
        ensureDirectoryForFile()
        <a href="classes/Primordyx-Utils-Utils.html#method_ensureDirectoryForFile" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Utils/Utils.php"><a href="files/src-utils-utils.html"><abbr title="src/Utils/Utils.php">Utils.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">694</span>

    </aside>

        <p class="phpdocumentor-summary">Create directory structure for file path to prevent write failures</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
            <span class="phpdocumentor-signature__static">static</span>        <span class="phpdocumentor-signature__name">ensureDirectoryForFile</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$filePath</span></span><span class="phpdocumentor-signature__argument"><span>[</span><span>, </span><span class="phpdocumentor-signature__argument__return-type">int&nbsp;</span><span class="phpdocumentor-signature__argument__name">$permissions</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">0755</span><span> ]</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">bool</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Recursively creates parent directories for specified file path if they don't
already exist. Essential for dynamic file creation where directory structure
may not be pre-established, preventing common &quot;No such file or directory&quot; errors.</p>
<h2>Directory Creation Process</h2>
<ol>
<li><strong>Path Analysis</strong>: Extract directory path using dirname()</li>
<li><strong>Existence Check</strong>: Return early if directory already exists</li>
<li><strong>Recursive Creation</strong>: Create parent directories with mkdir(..., true)</li>
<li><strong>Permission Setting</strong>: Apply specified permissions to created directories</li>
<li><strong>Result Return</strong>: Boolean success/failure status</li>
</ol>
<h2>Permission Handling</h2>
<ul>
<li><strong>Default</strong>: 0755 (owner: rwx, group: rx, other: rx)</li>
<li><strong>Configurable</strong>: Custom permissions via parameter</li>
<li><strong>Recursive</strong>: Applied to all created directories in path</li>
<li><strong>Existing</strong>: Does not modify permissions of existing directories</li>
</ul>
<h2>Use Cases</h2>
<ul>
<li>Log file initialization in dynamic paths</li>
<li>Cache file storage with date-based directory structure</li>
<li>Upload handling with user-specific directories</li>
<li>Report generation in organized folder hierarchies</li>
<li>Configuration file creation in multi-level paths</li>
</ul>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$filePath</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Complete file path (including filename) for directory creation</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$permissions</span>
                : <span class="phpdocumentor-signature__argument__return-type">int</span>
                 = <span class="phpdocumentor-signature__argument__default-value">0755</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Octal permissions for created directories (default: 0755)</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Utils-Utils.html#method_ensureDirectoryForFile#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Log File Directory Preparation</p>
<pre class="prettyprint"><code class="language-php">$logFile = '/var/log/app/2025/01/15/debug.log';

if (Utils::ensureDirectoryForFile($logFile)) {
    file_put_contents($logFile, &quot;Application started\n&quot;, FILE_APPEND);
} else {
    error_log(&quot;Failed to create log directory&quot;);
}
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>User Upload Organization</p>
<pre class="prettyprint"><code class="language-php">function saveUserUpload($userId, $filename, $uploadData) {
    $uploadPath = &quot;/uploads/users/$userId/&quot; . date('Y/m/') . $filename;

    if (Utils::ensureDirectoryForFile($uploadPath)) {
        return file_put_contents($uploadPath, $uploadData) !== false;
    }

    throw new RuntimeException(&quot;Unable to create upload directory&quot;);
}

// Creates: /uploads/users/123/2025/01/ (if needed)
$success = saveUserUpload(123, 'document.pdf', $pdfData);
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Cache File Management</p>
<pre class="prettyprint"><code class="language-php">class CacheManager {
    public static function store($key, $data) {
        $cachePath = '/tmp/cache/' . substr($key, 0, 2) . '/' . $key . '.cache';

        if (Utils::ensureDirectoryForFile($cachePath)) {
            return file_put_contents($cachePath, serialize($data)) !== false;
        }

        return false;
    }
}

// Creates nested cache directories as needed
CacheManager::store('abc123def456', $cacheData);
// Creates: /tmp/cache/ab/ (if needed)
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Custom Permissions</p>
<pre class="prettyprint"><code class="language-php">// More restrictive permissions for sensitive files
$sensitiveFile = '/secure/keys/private/app.key';
Utils::ensureDirectoryForFile($sensitiveFile, 0750); // rwxr-x---

// More open permissions for public files
$publicFile = '/var/www/public/images/thumbnails/thumb.jpg';
Utils::ensureDirectoryForFile($publicFile, 0755); // rwxr-xr-x
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Error Handling</p>
<pre class="prettyprint"><code class="language-php">function safeFileWrite($path, $data) {
    if (!Utils::ensureDirectoryForFile($path)) {
        throw new RuntimeException(&quot;Cannot create directory for: $path&quot;);
    }

    if (file_put_contents($path, $data) === false) {
        throw new RuntimeException(&quot;Cannot write to file: $path&quot;);
    }

    return true;
}
</code></pre>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">bool</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>True if directory exists or was created successfully, false on failure</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                    -static                    "
>
    <h4 class="phpdocumentor-element__name" id="method_getNextFileSequenceNumber">
        getNextFileSequenceNumber()
        <a href="classes/Primordyx-Utils-Utils.html#method_getNextFileSequenceNumber" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Utils/Utils.php"><a href="files/src-utils-utils.html"><abbr title="src/Utils/Utils.php">Utils.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">559</span>

    </aside>

        <p class="phpdocumentor-summary">Calculate next available sequence number for patterned file naming</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
            <span class="phpdocumentor-signature__static">static</span>        <span class="phpdocumentor-signature__name">getNextFileSequenceNumber</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$pattern</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">int</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Analyzes existing files matching a numeric pattern and returns the next available
sequence number. Useful for auto-incrementing file names, backup sequences, or
any systematic file numbering scheme requiring gap detection and collision avoidance.</p>
<h2>Pattern Format</h2>
<ul>
<li><strong>Placeholder</strong>: Use '#' characters to represent numeric digits</li>
<li><strong>Digit Count</strong>: Number of '#' characters determines padding (###  = 3 digits)</li>
<li><strong>Pattern Example</strong>: <code class="prettyprint">/var/logs/app_###.log</code> matches <code class="prettyprint">app_001.log</code>, <code class="prettyprint">app_002.log</code></li>
<li><strong>Directory Support</strong>: Full paths supported with automatic directory extraction</li>
</ul>
<h2>Sequence Detection Logic</h2>
<ol>
<li><strong>Pattern Analysis</strong>: Count '#' characters to determine numeric field width</li>
<li><strong>Glob Search</strong>: Create wildcard pattern and scan directory for matches</li>
<li><strong>Number Extraction</strong>: Parse numeric sequences from matching filenames</li>
<li><strong>Maximum Finding</strong>: Identify highest existing sequence number</li>
<li><strong>Next Calculation</strong>: Return max + 1 as next available number</li>
</ol>
<h2>Gap Handling</h2>
<p>Returns next number after highest found, not first gap. If files exist as
<code class="prettyprint">file_001.txt, file_003.txt, file_005.txt</code>, returns <code class="prettyprint">6</code> not <code class="prettyprint">2</code> or <code class="prettyprint">4</code>.</p>
<h2>Zero Padding Awareness</h2>
<p>Respects padding implied by pattern - <code class="prettyprint">###</code> expects 3-digit numbers, so
generated filenames should use sprintf('%03d', $number) for consistency.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$pattern</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>File path pattern with '#' placeholders for digits</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Utils-Utils.html#method_getNextFileSequenceNumber#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link"><abbr title="\InvalidArgumentException">InvalidArgumentException</abbr></span>
                                                            
                                                 <section class="phpdocumentor-description"><p>If pattern contains no '#' characters</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Log File Rotation</p>
<pre class="prettyprint"><code class="language-php">// Pattern: /var/log/app_###.log
// Existing: app_001.log, app_002.log, app_005.log
$nextNum = Utils::getNextFileSequenceNumber('/var/log/app_###.log');
// Returns: 6

$newLogFile = sprintf('/var/log/app_%03d.log', $nextNum);
// Creates: /var/log/app_006.log
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Backup File Management</p>
<pre class="prettyprint"><code class="language-php">$backupPattern = '/backups/database_backup_####.sql';
// Existing: database_backup_0001.sql, database_backup_0003.sql
$nextBackup = Utils::getNextFileSequenceNumber($backupPattern);
// Returns: 4

$backupFile = sprintf('/backups/database_backup_%04d.sql', $nextBackup);
// Creates: /backups/database_backup_0004.sql
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Upload File Sequences</p>
<pre class="prettyprint"><code class="language-php">function saveUpload($uploadedFile) {
    $pattern = '/uploads/user_files/document_###.pdf';
    $sequence = Utils::getNextFileSequenceNumber($pattern);
    $filename = sprintf('/uploads/user_files/document_%03d.pdf', $sequence);

    move_uploaded_file($uploadedFile['tmp_name'], $filename);
    return $filename;
}
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Different Padding Patterns</p>
<pre class="prettyprint"><code class="language-php">// Single digit: #
$next1 = Utils::getNextFileSequenceNumber('/temp/file_#.tmp');     // Returns: 1,2,3...

// Two digits: ##
$next2 = Utils::getNextFileSequenceNumber('/temp/file_##.tmp');    // Use %02d format

// Five digits: #####
$next5 = Utils::getNextFileSequenceNumber('/temp/file_#####.tmp'); // Use %05d format
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Error Cases</p>
<pre class="prettyprint"><code class="language-php">try {
    // Invalid pattern - no # characters
    $num = Utils::getNextFileSequenceNumber('/logs/static_filename.log');
} catch (InvalidArgumentException $e) {
    echo &quot;Error: &quot; . $e-&gt;getMessage(); // &quot;Pattern must contain one or more '#' characters.&quot;
}
</code></pre>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">int</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>Next available sequence number (always â‰¥ 1)</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                    -static                    "
>
    <h4 class="phpdocumentor-element__name" id="method_parseToAssocArray">
        parseToAssocArray()
        <a href="classes/Primordyx-Utils-Utils.html#method_parseToAssocArray" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Utils/Utils.php"><a href="files/src-utils-utils.html"><abbr title="src/Utils/Utils.php">Utils.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">446</span>

    </aside>

        <p class="phpdocumentor-summary">Parse pipe-delimited INI-style string into associative array with type conversion</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
            <span class="phpdocumentor-signature__static">static</span>        <span class="phpdocumentor-signature__name">parseToAssocArray</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string|null&nbsp;</span><span class="phpdocumentor-signature__argument__name">$raw</span></span><span class="phpdocumentor-signature__argument"><span>[</span><span>, </span><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$separator</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">&#039;|&#039;</span><span> ]</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;int, mixed&gt;</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Converts configuration strings in &quot;key=value|key=value&quot; format into PHP
associative arrays with automatic type conversion for numeric values. Useful
for parsing configuration data, database connection options, or serialized settings.</p>
<h2>Parsing Format</h2>
<ul>
<li><strong>Delimiter</strong>: Pipe character (|) separates key-value pairs by default</li>
<li><strong>Assignment</strong>: Equals sign (=) separates keys from values</li>
<li><strong>Key Conversion</strong>: Keys cast to integers for numeric keys</li>
<li><strong>Value Conversion</strong>: Numeric values automatically cast to integers</li>
<li><strong>Trimming</strong>: Automatic whitespace trimming on keys and values</li>
</ul>
<h2>Type Conversion Rules</h2>
<ul>
<li>Numeric values converted to integers using is_numeric() and (int) casting</li>
<li>Non-numeric values remain as strings</li>
<li>Empty values remain as empty strings</li>
</ul>
<h2>Error Handling</h2>
<ul>
<li>Empty/null input returns empty array</li>
<li>Malformed pairs (missing =) are silently skipped</li>
<li>Invalid separators produce empty arrays</li>
<li>Method never throws exceptions for parsing errors</li>
</ul>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$raw</span>
                : <span class="phpdocumentor-signature__argument__return-type">string|null</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Configuration string to parse (null returns empty array)</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$separator</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                 = <span class="phpdocumentor-signature__argument__default-value">&#039;|&#039;</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Character used to separate key-value pairs (default: '|')</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Utils-Utils.html#method_parseToAssocArray#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Database Configuration Parsing</p>
<pre class="prettyprint"><code class="language-php">$dbConfig = &quot;1002=SET NAMES utf8mb4 COLLATE utf8mb4_unicode_ci|3=2|1000=30&quot;;
$options = Utils::parseToAssocArray($dbConfig);
// Result: [
//   1002 =&gt; 'SET NAMES utf8mb4 COLLATE utf8mb4_unicode_ci',
//   3 =&gt; 2,
//   1000 =&gt; 30
// ]

// Use in PDO connection
$pdo = new PDO($dsn, $username, $password, $options);
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Application Settings</p>
<pre class="prettyprint"><code class="language-php">$settings = &quot;timeout=30|retries=3|debug=1|environment=production&quot;;
$config = Utils::parseToAssocArray($settings);
// Result: [
//   'timeout' =&gt; 30,      // Note: key would be integer if numeric
//   'retries' =&gt; 3,
//   'debug' =&gt; 1,
//   'environment' =&gt; 'production'
// ]
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Custom Separator</p>
<pre class="prettyprint"><code class="language-php">$data = &quot;width=800&amp;height=600&amp;fullscreen=1&quot;;
$dimensions = Utils::parseToAssocArray($data, '&amp;');
// Result: ['width' =&gt; 800, 'height' =&gt; 600, 'fullscreen' =&gt; 1]

// Comma-separated configuration
$csvConfig = &quot;port=3306,user=admin,password=secret&quot;;
$dbSettings = Utils::parseToAssocArray($csvConfig, ',');
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Error Handling Cases</p>
<pre class="prettyprint"><code class="language-php">// Empty input
$empty = Utils::parseToAssocArray('');        // Returns: []
$null = Utils::parseToAssocArray(null);       // Returns: []

// Malformed pairs (missing equals)
$malformed = Utils::parseToAssocArray('key1|key2=value|key3');
// Result: ['key2' =&gt; 'value'] (key1 and key3 skipped)

// Mixed valid/invalid pairs
$mixed = &quot;valid=123|invalid|another=456&quot;;
$result = Utils::parseToAssocArray($mixed);   // ['valid' =&gt; 123, 'another' =&gt; 456]
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Configuration File Processing</p>
<pre class="prettyprint"><code class="language-php">// Read from config file
$configLine = trim(file_get_contents('app.config'));
$appConfig = Utils::parseToAssocArray($configLine);

// Apply configuration
ini_set('max_execution_time', $appConfig['timeout'] ?? 30);
error_reporting($appConfig['error_level'] ?? E_ALL);
</code></pre>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;int, mixed&gt;</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>Associative array with integer keys and mixed values</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                    -static                    "
>
    <h4 class="phpdocumentor-element__name" id="method_sendJson">
        sendJson()
        <a href="classes/Primordyx-Utils-Utils.html#method_sendJson" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Utils/Utils.php"><a href="files/src-utils-utils.html"><abbr title="src/Utils/Utils.php">Utils.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">131</span>

    </aside>

        <p class="phpdocumentor-summary">Convenient alias for sendJsonResponse() with identical functionality</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
            <span class="phpdocumentor-signature__static">static</span>        <span class="phpdocumentor-signature__name">sendJson</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">mixed&nbsp;</span><span class="phpdocumentor-signature__argument__name">$data</span></span><span class="phpdocumentor-signature__argument"><span>[</span><span>, </span><span class="phpdocumentor-signature__argument__return-type">int&nbsp;</span><span class="phpdocumentor-signature__argument__name">$code</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">200</span><span> ]</span></span><span class="phpdocumentor-signature__argument"><span>[</span><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string, string&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$headers</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">[]</span><span> ]</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">never</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Provides shorter method name for frequent JSON response operations while
maintaining exact same parameters, behavior, and script termination as
sendJsonResponse(). Choose based on coding style preference or team conventions.</p>
<h2>Method Equivalence</h2>
<p>This method is functionally identical to sendJsonResponse() and simply
delegates all parameters without modification. Both methods set identical
headers, handle data encoding the same way, and terminate script execution.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$data</span>
                : <span class="phpdocumentor-signature__argument__return-type">mixed</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Data to encode as JSON (arrays, objects, primitives)</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$code</span>
                : <span class="phpdocumentor-signature__argument__return-type">int</span>
                 = <span class="phpdocumentor-signature__argument__default-value">200</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>HTTP status code to send (default: 200 OK)</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$headers</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string, string&gt;</span>
                 = <span class="phpdocumentor-signature__argument__default-value">[]</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Optional additional HTTP headers to send</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Utils-Utils.html#method_sendJson#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Convenient JSON Responses</p>
<pre class="prettyprint"><code class="language-php">// Quick success response
Utils::sendJson(['success' =&gt; true]);

// Error response with custom status
Utils::sendJson(['error' =&gt; 'Invalid input'], 400);

// Complex response with headers
Utils::sendJson($apiData, 201, ['X-API-Version' =&gt; '1.0']);
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Utils\sendJsonResponse()">sendJsonResponse()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For complete method documentation</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">never</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>Method terminates script execution and never returns</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                    -static                    "
>
    <h4 class="phpdocumentor-element__name" id="method_sendJsonResponse">
        sendJsonResponse()
        <a href="classes/Primordyx-Utils-Utils.html#method_sendJsonResponse" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Utils/Utils.php"><a href="files/src-utils-utils.html"><abbr title="src/Utils/Utils.php">Utils.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">221</span>

    </aside>

        <p class="phpdocumentor-summary">Send JSON response with HTTP status code and terminate script execution</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
            <span class="phpdocumentor-signature__static">static</span>        <span class="phpdocumentor-signature__name">sendJsonResponse</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">mixed&nbsp;</span><span class="phpdocumentor-signature__argument__name">$data</span></span><span class="phpdocumentor-signature__argument"><span>[</span><span>, </span><span class="phpdocumentor-signature__argument__return-type">int&nbsp;</span><span class="phpdocumentor-signature__argument__name">$code</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">200</span><span> ]</span></span><span class="phpdocumentor-signature__argument"><span>[</span><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string, string&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$headers</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">[]</span><span> ]</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">never</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Comprehensive JSON response handler that sets appropriate HTTP headers, encodes
data as JSON with pretty-printing, and terminates script execution. Essential for
API endpoints and AJAX handlers requiring standardized JSON responses.</p>
<h2>Response Process</h2>
<ol>
<li><strong>Header Safety</strong>: Check if headers already sent to avoid errors</li>
<li><strong>Status Code</strong>: Set HTTP status using HttpStatus class integration</li>
<li><strong>Content-Type</strong>: Set to application/json for proper MIME handling</li>
<li><strong>Custom Headers</strong>: Add any additional headers provided</li>
<li><strong>JSON Encoding</strong>: Encode data with JSON_PRETTY_PRINT for readability</li>
<li><strong>Script Termination</strong>: Exit immediately after response sent</li>
</ol>
<h2>Header Management</h2>
<ul>
<li>Automatically sets Content-Type: application/json</li>
<li>Uses HttpStatus::sendHeader() for proper status code handling</li>
<li>Supports custom headers via associative array parameter</li>
<li>Gracefully handles cases where headers already sent</li>
</ul>
<h2>JSON Encoding</h2>
<ul>
<li>Uses JSON_PRETTY_PRINT for human-readable output</li>
<li>Handles PHP data types automatically (arrays, objects, primitives)</li>
<li>Does not perform JSON encoding error handling (assumes valid data)</li>
</ul>
<h2>Script Termination</h2>
<p>Method never returns - always terminates script with exit after response.
This prevents additional output that could corrupt JSON response format.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$data</span>
                : <span class="phpdocumentor-signature__argument__return-type">mixed</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Data to encode as JSON (any JSON-serializable type)</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$code</span>
                : <span class="phpdocumentor-signature__argument__return-type">int</span>
                 = <span class="phpdocumentor-signature__argument__default-value">200</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>HTTP status code (default: 200, common: 201, 400, 404, 500)</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$headers</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string, string&gt;</span>
                 = <span class="phpdocumentor-signature__argument__default-value">[]</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Additional headers as key-value pairs</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Utils-Utils.html#method_sendJsonResponse#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>API Success Responses</p>
<pre class="prettyprint"><code class="language-php">// Simple success with data
Utils::sendJsonResponse(['users' =&gt; $userList, 'total' =&gt; $count]);

// Created response (HTTP 201)
Utils::sendJsonResponse(['id' =&gt; $newUserId], 201);

// Success with metadata headers
Utils::sendJsonResponse($results, 200, [
    'X-Total-Count' =&gt; $totalCount,
    'X-Page-Number' =&gt; $pageNumber
]);
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>API Error Responses</p>
<pre class="prettyprint"><code class="language-php">// Bad Request (HTTP 400)
Utils::sendJsonResponse([
    'error' =&gt; 'validation_failed',
    'message' =&gt; 'Email address is required',
    'fields' =&gt; ['email']
], 400);

// Not Found (HTTP 404)
Utils::sendJsonResponse(['error' =&gt; 'User not found'], 404);

// Internal Server Error (HTTP 500)
Utils::sendJsonResponse(['error' =&gt; 'Database connection failed'], 500);
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>AJAX Handler Integration</p>
<pre class="prettyprint"><code class="language-php">// In controller or route handler
public function handleAjaxRequest() {
    try {
        $result = $this-&gt;processRequest($_POST);
        Utils::sendJsonResponse(['success' =&gt; true, 'data' =&gt; $result]);
    } catch (ValidationException $e) {
        Utils::sendJsonResponse(['error' =&gt; $e-&gt;getMessage()], 400);
    } catch (Exception $e) {
        Utils::sendJsonResponse(['error' =&gt; 'Internal error'], 500);
    }
}
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Http-HttpStatus.html#method_sendHeader"><abbr title="\Primordyx\Http\HttpStatus::sendHeader()">HttpStatus::sendHeader()</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For HTTP status code handling</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Utils\sendJson()">sendJson()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For convenient alias method</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">never</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>Method always terminates script execution</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                    -static                    "
>
    <h4 class="phpdocumentor-element__name" id="method_toCsv">
        toCsv()
        <a href="classes/Primordyx-Utils-Utils.html#method_toCsv" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Utils/Utils.php"><a href="files/src-utils-utils.html"><abbr title="src/Utils/Utils.php">Utils.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">333</span>

    </aside>

        <p class="phpdocumentor-summary">Convert two-dimensional array to CSV-formatted string with automatic headers</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
            <span class="phpdocumentor-signature__static">static</span>        <span class="phpdocumentor-signature__name">toCsv</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, array&lt;string, mixed&gt;&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$rows</span></span><span class="phpdocumentor-signature__argument"><span>[</span><span>, </span><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$delimiter</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">&#039;,&#039;</span><span> ]</span></span><span class="phpdocumentor-signature__argument"><span>[</span><span>, </span><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$enclosure</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">&#039;&quot;&#039;</span><span> ]</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">string</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Transforms array of associative arrays into properly formatted CSV string with
configurable delimiters and enclosures. Automatically generates header row from
first record's keys and handles CSV escaping through PHP's built-in fputcsv().</p>
<h2>CSV Format Features</h2>
<ul>
<li><strong>Automatic Headers</strong>: Uses first row keys as column headers</li>
<li><strong>Proper Escaping</strong>: Handles commas, quotes, newlines in data via fputcsv()</li>
<li><strong>Configurable Delimiters</strong>: Custom field separators (comma, tab, pipe, etc.)</li>
<li><strong>Configurable Enclosures</strong>: Custom quote characters for field wrapping</li>
<li><strong>Empty Array Handling</strong>: Returns empty string for empty input arrays</li>
</ul>
<h2>Data Structure Requirements</h2>
<ul>
<li>Input must be array of associative arrays (rows)</li>
<li>All rows should have consistent key structure for proper columns</li>
<li>Keys become column headers, values become cell data</li>
<li>Mixed data types automatically converted to strings</li>
</ul>
<h2>Memory Efficiency</h2>
<p>Uses php://temp stream for memory-efficient processing of large datasets
without loading entire CSV string into memory during generation.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$rows</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, array&lt;string, mixed&gt;&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Array of associative arrays representing CSV rows</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$delimiter</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                 = <span class="phpdocumentor-signature__argument__default-value">&#039;,&#039;</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Field separator character (default: comma)</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$enclosure</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                 = <span class="phpdocumentor-signature__argument__default-value">&#039;&quot;&#039;</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Quote character for fields (default: double-quote)</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Utils-Utils.html#method_toCsv#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link"><abbr title="\RuntimeException">RuntimeException</abbr></span>
                                                            
                                                 <section class="phpdocumentor-description"><p>If unable to create temporary stream for CSV generation</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>User Data Export</p>
<pre class="prettyprint"><code class="language-php">$users = [
    ['id' =&gt; 1, 'name' =&gt; 'John Doe', 'email' =&gt; 'john@example.com'],
    ['id' =&gt; 2, 'name' =&gt; 'Jane Smith', 'email' =&gt; 'jane@example.com'],
    ['id' =&gt; 3, 'name' =&gt; 'Bob Wilson', 'email' =&gt; 'bob@example.com']
];

$csv = Utils::toCsv($users);
// Returns:
// id,name,email
// 1,&quot;John Doe&quot;,&quot;john@example.com&quot;
// 2,&quot;Jane Smith&quot;,&quot;jane@example.com&quot;
// 3,&quot;Bob Wilson&quot;,&quot;bob@example.com&quot;

// Save to file
file_put_contents('users.csv', $csv);
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Custom Delimiters</p>
<pre class="prettyprint"><code class="language-php">$data = [
    ['product' =&gt; 'Widget A', 'price' =&gt; 19.99, 'stock' =&gt; 150],
    ['product' =&gt; 'Widget B', 'price' =&gt; 29.99, 'stock' =&gt; 75]
];

// Tab-separated values
$tsv = Utils::toCsv($data, &quot;\t&quot;);

// Pipe-separated values
$psv = Utils::toCsv($data, '|');

// Custom enclosure
$custom = Utils::toCsv($data, ',', &quot;'&quot;);
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Database Export</p>
<pre class="prettyprint"><code class="language-php">// Export database results
$orders = Database::query('SELECT * FROM orders WHERE status = ?', ['completed']);
$csvData = Utils::toCsv($orders);

// Send as download
header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename=&quot;orders.csv&quot;');
echo $csvData;
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Complex Data Handling</p>
<pre class="prettyprint"><code class="language-php">$reports = [
    [
        'date' =&gt; '2025-01-15',
        'description' =&gt; 'Sales report with &quot;quotes&quot; and, commas',
        'revenue' =&gt; 15420.50,
        'notes' =&gt; &quot;Multi-line\nnotes here&quot;
    ],
    [
        'date' =&gt; '2025-01-16',
        'description' =&gt; 'Another report',
        'revenue' =&gt; 18750.00,
        'notes' =&gt; 'Simple notes'
    ]
];

$csv = Utils::toCsv($reports);
// Properly escapes quotes, commas, and newlines
</code></pre>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">string</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>Complete CSV-formatted string including headers</p>
</section>

            </section>

</article>
            </section>

        <div class="phpdocumentor-modal" id="source-view">
    <div class="phpdocumentor-modal-bg" data-exit-button></div>
    <div class="phpdocumentor-modal-container">
        <div class="phpdocumentor-modal-content">
            <pre style="max-height: 500px; overflow-y: scroll" data-src="files/src/Utils/Utils.php.txt" class="language-php line-numbers linkable-line-numbers"></pre>
        </div>
        <button data-exit-button class="phpdocumentor-modal__close">&times;</button>
    </div>
</div>

    <script type="text/javascript">
        (function () {
            function loadExternalCodeSnippet(el, url, line) {
                Array.prototype.slice.call(el.querySelectorAll('pre[data-src]')).forEach((pre) => {
                    const src = url || pre.getAttribute('data-src').replace(/\\/g, '/');
                    const language = 'php';

                    const code = document.createElement('code');
                    code.className = 'language-' + language;
                    pre.textContent = '';
                    pre.setAttribute('data-line', line)
                    code.textContent = 'Loadingâ€¦';
                    pre.appendChild(code);

                    var xhr = new XMLHttpRequest();

                    xhr.open('GET', src, true);

                    xhr.onreadystatechange = function () {
                        if (xhr.readyState !== 4) {
                            return;
                        }

                        if (xhr.status < 400 && xhr.responseText) {
                            code.textContent = xhr.responseText;
                            Prism.highlightElement(code);
                            d=document.getElementsByClassName("line-numbers");
                            d[0].scrollTop = d[0].children[1].offsetTop;
                            return;
                        }

                        if (xhr.status === 404) {
                            code.textContent = 'âœ– Error: File could not be found';
                            return;
                        }

                        if (xhr.status >= 400) {
                            code.textContent = 'âœ– Error ' + xhr.status + ' while fetching file: ' + xhr.statusText;
                            return;
                        }

                        code.textContent = 'âœ– Error: An unknown error occurred';
                    };

                    xhr.send(null);
                });
            }

            const modalButtons = document.querySelectorAll("[data-modal]");
            const openedAsLocalFile = window.location.protocol === 'file:';
            if (modalButtons.length > 0 && openedAsLocalFile) {
                console.warn(
                    'Viewing the source code is unavailable because you are opening this page from the file:// scheme; ' +
                    'browsers block XHR requests when a page is opened this way'
                );
            }

            modalButtons.forEach(function (trigger) {
                if (openedAsLocalFile) {
                    trigger.setAttribute("hidden", "hidden");
                }

                trigger.addEventListener("click", function (event) {
                    event.preventDefault();
                    const modal = document.getElementById(trigger.dataset.modal);
                    if (!modal) {
                        console.error(`Modal with id "${trigger.dataset.modal}" could not be found`);
                        return;
                    }
                    modal.classList.add("phpdocumentor-modal__open");

                    loadExternalCodeSnippet(modal, trigger.dataset.src || null, trigger.dataset.line)
                    const exits = modal.querySelectorAll("[data-exit-button]");
                    exits.forEach(function (exit) {
                        exit.addEventListener("click", function (event) {
                            event.preventDefault();
                            modal.classList.remove("phpdocumentor-modal__open");
                        });
                    });
                });
            });
        })();
    </script>

    </article>
                                </section>
                <section class="phpdocumentor-on-this-page__sidebar">
                                
    <section class="phpdocumentor-on-this-page__content">
        <strong class="phpdocumentor-on-this-page__title">On this page</strong>

        <ul class="phpdocumentor-list -clean">
            <li class="phpdocumentor-on-this-page-section__title">Table Of Contents</li>
            <li>
                <ul class="phpdocumentor-list -clean">
                                                                                <li><a href="classes/Primordyx-Utils-Utils.html#toc-methods">Methods</a></li>
                                    </ul>
            </li>
            
            
                        <li class="phpdocumentor-on-this-page-section__title">Methods</li>
            <li>
                <ul class="phpdocumentor-list -clean">
                                            <li class=""><a href="classes/Primordyx-Utils-Utils.html#method_ensureDirectoryForFile">ensureDirectoryForFile()</a></li>
                                            <li class=""><a href="classes/Primordyx-Utils-Utils.html#method_getNextFileSequenceNumber">getNextFileSequenceNumber()</a></li>
                                            <li class=""><a href="classes/Primordyx-Utils-Utils.html#method_parseToAssocArray">parseToAssocArray()</a></li>
                                            <li class=""><a href="classes/Primordyx-Utils-Utils.html#method_sendJson">sendJson()</a></li>
                                            <li class=""><a href="classes/Primordyx-Utils-Utils.html#method_sendJsonResponse">sendJsonResponse()</a></li>
                                            <li class=""><a href="classes/Primordyx-Utils-Utils.html#method_toCsv">toCsv()</a></li>
                                    </ul>
            </li>
                    </ul>
    </section>

                </section>
                            </div>
            <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
        </div>
        <a href="classes/Primordyx-Utils-Utils.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>
