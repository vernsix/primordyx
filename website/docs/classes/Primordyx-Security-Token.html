<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
            <title>Primordyx Framework Documentation</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/template.js"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">Primordyx Framework Documentation</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -three phpdocumentor-sidebar">
                    <section class="phpdocumentor-sidebar__category -namespaces">
            <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/primordyxcli.html" class="">PrimordyxCLI</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/primordyx.html" class="">Primordyx</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="namespaces/primordyx-config.html" class="">Config</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-data.html" class="">Data</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-database.html" class="">Database</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-events.html" class="">Events</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-geo.html" class="">Geo</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-http.html" class="">Http</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-mail.html" class="">Mail</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-routing.html" class="">Routing</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-security.html" class="">Security</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-system.html" class="">System</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-time.html" class="">Time</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-utils.html" class="">Utils</a>
                
            </li>
                    <li>
                <a href="namespaces/primordyx-view.html" class="">View</a>
                
            </li>
            </ul>

                        </section>
                <section class="phpdocumentor-sidebar__category -packages">
            <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Primordyx.html" class="">Primordyx</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Application.html" class="">Application</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/PrimordyxExamples.html" class="">PrimordyxExamples</a>
</h4>

                        </section>
            
    <section class="phpdocumentor-sidebar__category -reports">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category -indices">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -nine phpdocumentor-content">
                                <section>
                                        <ul class="phpdocumentor-breadcrumbs">
            <li class="phpdocumentor-breadcrumb"><a href="namespaces/primordyx.html">Primordyx</a></li>
            <li class="phpdocumentor-breadcrumb"><a href="namespaces/primordyx-security.html">Security</a></li>
    </ul>

    <article class="phpdocumentor-element -class">
        <h2 class="phpdocumentor-content__title">
    Token

    
            <div class="phpdocumentor-element__package">
            in package
            <ul class="phpdocumentor-breadcrumbs">
                                    <li class="phpdocumentor-breadcrumb"><a href="packages/Primordyx.html">Primordyx</a></li>
                            </ul>
        </div>
    
    
    </h2>

<div class="phpdocumentor-label-line">


</div>

        <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">147</span>

    </aside>

            <p class="phpdocumentor-summary">Secure expiring token management with encrypted serialization and custom payloads</p>


    <section class="phpdocumentor-description"><p>Comprehensive token system for creating, encrypting, decrypting, and validating time-based
tokens with custom data payloads. Uses the Cargo system for internal state management and
Crypto class for AES-256-GCM encryption, providing secure token-based authentication, session
management, and temporary data exchange.</p>
<h2>Core Architecture</h2>
<ul>
<li><strong>Cargo Integration</strong>: Uses Cargo instances for internal key-value data storage</li>
<li><strong>Crypto Security</strong>: AES-256-GCM encryption via Primordyx\Crypto for token protection</li>
<li><strong>UUID Identification</strong>: Each token has unique UUID for identification and cargo naming</li>
<li><strong>State Tracking</strong>: Dirty flag system tracks modifications for optimization</li>
<li><strong>Time Management</strong>: Flexible UTC/local time support for expiration handling</li>
</ul>
<h2>Token Lifecycle</h2>
<ol>
<li><strong>Creation</strong>: New Token instance with unique UUID and Cargo container</li>
<li><strong>Payload Setup</strong>: Store timestamp, TTL, and custom data in Cargo</li>
<li><strong>Encryption</strong>: JSON serialize and encrypt token data into shareable string</li>
<li><strong>Distribution</strong>: Share encrypted token string via URL, API, or storage</li>
<li><strong>Validation</strong>: Load token from encrypted string and verify expiration</li>
<li><strong>Access</strong>: Extract custom payload data and perform authorized operations</li>
</ol>
<h2>Security Features</h2>
<ul>
<li><strong>AES-256-GCM Encryption</strong>: Military-grade encryption for token protection</li>
<li><strong>Tamper Detection</strong>: Invalid tokens fail decryption and are rejected</li>
<li><strong>Time-based Expiration</strong>: Automatic expiration prevents token reuse</li>
<li><strong>UUID Randomness</strong>: Cryptographically secure UUIDs prevent prediction</li>
<li><strong>State Validation</strong>: Multiple validation layers ensure token integrity</li>
</ul>
<h2>Payload Flexibility</h2>
<p>Tokens support arbitrary custom data alongside core timestamp/expiration:</p>
<ul>
<li>User authentication tokens with roles and permissions</li>
<li>Password reset tokens with user ID and security codes</li>
<li>API access tokens with scope and rate limiting data</li>
<li>Session tokens with user preferences and state</li>
<li>One-time operation tokens with specific action parameters</li>
</ul>
<h2>Integration Points</h2>
<ul>
<li><strong>Cargo System</strong>: Leverages Cargo for flexible key-value data management</li>
<li><strong>Crypto Class</strong>: Uses framework encryption for secure token protection</li>
<li><strong>Strings Utility</strong>: UUID generation via Strings::uuid() for unique identification</li>
<li><strong>TimeHelper</strong>: ISO timestamp formatting with UTC/local time support</li>
</ul>
</section>


    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Basic Token Creation and Validation</p>
<pre class="prettyprint"><code class="language-php">// Create token with 1-hour expiration
$token = new Token();
$encrypted = $token-&gt;makeShareableToken(3600, [
    'user_id' =&gt; 123,
    'action' =&gt; 'password_reset',
    'security_code' =&gt; 'abc123'
]);

// Send $encrypted via email or URL

// Later, validate received token
$receivedToken = new Token();
if ($receivedToken-&gt;loadFromShareableToken($encrypted)) {
    if (!$receivedToken-&gt;isExpired()) {
        $payload = $receivedToken-&gt;getCargo()-&gt;get('custom', []);
        $userId = $payload['user_id'];
        // Proceed with authorized action
    } else {
        echo &quot;Token has expired&quot;;
    }
} else {
    echo &quot;Invalid token&quot;;
}
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Advanced Token Management</p>
<pre class="prettyprint"><code class="language-php">// Create API access token with metadata
$token = new Token(true); // Use UTC timestamps
$encrypted = $token-&gt;makeShareableToken(86400, [ // 24 hours
    'api_key' =&gt; 'sk_live_abc123',
    'scopes' =&gt; ['read', 'write'],
    'rate_limit' =&gt; 1000,
    'client_ip' =&gt; $_SERVER['REMOTE_ADDR']
]);

// Token inspection and debugging
$debug = $token-&gt;asArray(true); // Include extras
error_log(&quot;Token debug: &quot; . json_encode($debug));

// Check expiration without full validation
echo &quot;Expires: &quot; . $token-&gt;expiresAt();
echo &quot;Valid: &quot; . ($token-&gt;isValid() ? 'Yes' : 'No');
echo &quot;Expired: &quot; . ($token-&gt;isExpired() ? 'Yes' : 'No');
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Session Token Implementation</p>
<pre class="prettyprint"><code class="language-php">class SessionManager {
    public static function createSession($userId, $userData) {
        $token = new Token();
        return $token-&gt;makeShareableToken(3600 * 8, [ // 8 hours
            'user_id' =&gt; $userId,
            'login_time' =&gt; time(),
            'user_data' =&gt; $userData,
            'ip_address' =&gt; $_SERVER['REMOTE_ADDR'],
            'user_agent' =&gt; $_SERVER['HTTP_USER_AGENT']
        ]);
    }

    public static function validateSession($tokenString) {
        $token = new Token();
        if ($token-&gt;loadFromShareableToken($tokenString) &amp;&amp; !$token-&gt;isExpired()) {
            return $token-&gt;getCargo()-&gt;get('custom', []);
        }
        return null;
    }
}
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Data-Cargo.html"><abbr title="\Primordyx\Data\Cargo">Cargo</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For internal state management system</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Security-Crypto.html"><abbr title="\Primordyx\Security\Crypto">Crypto</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For token encryption and security</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Utils-Strings.html"><abbr title="\Primordyx\Utils\Strings">Strings</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For UUID generation utilities</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Time-TimeHelper.html"><abbr title="\Primordyx\Time\TimeHelper">TimeHelper</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For timestamp formatting support</p>
</section>

                                    </dd>
                                            </dl>





<h3 id="toc">
    Table of Contents
    <a href="classes/Primordyx-Security-Token.html#toc" class="headerlink"><i class="fas fa-link"></i></a>

</h3>









<h4 id="toc-properties">
    Properties
    <a href="classes/Primordyx-Security-Token.html#toc-properties" class="headerlink"><i class="fas fa-link"></i></a>

</h4>
<dl class="phpdocumentor-table-of-contents">
            <dt class="phpdocumentor-table-of-contents__entry -property -protected">
    <a class="" href="classes/Primordyx-Security-Token.html#property_cargo">$cargo</a>
    <span>
                        &nbsp;: <abbr title="\Primordyx\Security\cargo">cargo</abbr>            </span>
</dt>
<dd>Cargo container instance for token data storage and management</dd>

            <dt class="phpdocumentor-table-of-contents__entry -property -protected">
    <a class="" href="classes/Primordyx-Security-Token.html#property_encryptionIsValid">$encryptionIsValid</a>
    <span>
                        &nbsp;: bool            </span>
</dt>
<dd>Validation flag indicating whether token encryption/decryption was successful</dd>

            <dt class="phpdocumentor-table-of-contents__entry -property -protected">
    <a class="" href="classes/Primordyx-Security-Token.html#property_isDirty">$isDirty</a>
    <span>
                        &nbsp;: bool            </span>
</dt>
<dd>Flag tracking whether token state has been modified since last clean state</dd>

            <dt class="phpdocumentor-table-of-contents__entry -property -protected">
    <a class="" href="classes/Primordyx-Security-Token.html#property_shareableToken">$shareableToken</a>
    <span>
                        &nbsp;: string            </span>
</dt>
<dd>Encrypted string representation of token for secure distribution</dd>

            <dt class="phpdocumentor-table-of-contents__entry -property -protected">
    <a class="" href="classes/Primordyx-Security-Token.html#property_useUTC">$useUTC</a>
    <span>
                        &nbsp;: bool            </span>
</dt>
<dd>Configuration flag for timestamp formatting preference (UTC vs local time)</dd>

            <dt class="phpdocumentor-table-of-contents__entry -property -protected">
    <a class="" href="classes/Primordyx-Security-Token.html#property_uuid">$uuid</a>
    <span>
                        &nbsp;: string            </span>
</dt>
<dd>Unique identifier for token instance and associated Cargo container</dd>

    </dl>

<h4 id="toc-methods">
    Methods
    <a href="classes/Primordyx-Security-Token.html#toc-methods" class="headerlink"><i class="fas fa-link"></i></a>

</h4>
<dl class="phpdocumentor-table-of-contents">
            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method___construct">__construct()</a>
    <span>
                                &nbsp;: mixed    </span>
</dt>
<dd>Initialize new token instance with UUID generation and Cargo container setup</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method_asArray">asArray()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;    </span>
</dt>
<dd>Export complete token data as associative array for inspection and debugging</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method_asJson">asJson()</a>
    <span>
                                &nbsp;: string    </span>
</dt>
<dd>Export token data as JSON string with optional pretty-printing</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method_cargoIsDirty">cargoIsDirty()</a>
    <span>
                                &nbsp;: bool    </span>
</dt>
<dd>Check if internal Cargo container has unsaved changes</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method_expiresAt">expiresAt()</a>
    <span>
                                &nbsp;: string    </span>
</dt>
<dd>Get human-readable ISO-formatted expiration timestamp</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method_getCargo">getCargo()</a>
    <span>
                                &nbsp;: <abbr title="\Primordyx\Security\cargo">cargo</abbr>    </span>
</dt>
<dd>Get direct access to internal Cargo container for advanced data operations</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method_getShareableToken">getShareableToken()</a>
    <span>
                                &nbsp;: string    </span>
</dt>
<dd>Get encrypted token string for secure distribution and storage</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method_getUuid">getUuid()</a>
    <span>
                                &nbsp;: string    </span>
</dt>
<dd>Get unique identifier assigned to this token instance</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method_isDirty">isDirty()</a>
    <span>
                                &nbsp;: bool    </span>
</dt>
<dd>Check if token or its cargo has unsaved changes</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method_isExpired">isExpired()</a>
    <span>
                                &nbsp;: bool    </span>
</dt>
<dd>Check if token has exceeded its configured expiration time</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method_isValid">isValid()</a>
    <span>
                                &nbsp;: bool    </span>
</dt>
<dd>Check overall token validity based on encryption state</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method_loadFromShareableToken">loadFromShareableToken()</a>
    <span>
                                &nbsp;: bool    </span>
</dt>
<dd>Load and validate token state from encrypted shareable string</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/Primordyx-Security-Token.html#method_makeShareableToken">makeShareableToken()</a>
    <span>
                                &nbsp;: string    </span>
</dt>
<dd>Create encrypted shareable token with expiration and custom payload</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -protected">
    <a class="" href="classes/Primordyx-Security-Token.html#method_reset">reset()</a>
    <span>
                                &nbsp;: void    </span>
</dt>
<dd>Reset internal state and mark token as dirty and invalid</dd>

    </dl>



        

        
    <section class="phpdocumentor-properties">
        <h3 class="phpdocumentor-elements__header" id="properties">
            Properties
            <a href="classes/Primordyx-Security-Token.html#properties" class="headerlink"><i class="fas fa-link"></i></a>

        </h3>
                    <article
        class="
            phpdocumentor-element
            -property
            -protected
                                                                    "
>
    <h4 class="phpdocumentor-element__name" id="property_cargo">
        $cargo
        <a href="classes/Primordyx-Security-Token.html#property_cargo" class="headerlink"><i class="fas fa-link"></i></a>

        <span class="phpdocumentor-element__modifiers">
                                            </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">175</span>

    </aside>

        <p class="phpdocumentor-summary">Cargo container instance for token data storage and management</p>

    
    <code class="phpdocumentor-code phpdocumentor-signature ">
        <span class="phpdocumentor-signature__visibility">protected</span>
            <span class="phpdocumentor-signature__type"><abbr title="\Primordyx\Security\cargo">cargo</abbr></span>
    <span class="phpdocumentor-signature__name">$cargo</span>
    </code>

        <section class="phpdocumentor-description"><p>Houses all token-related data including creation timestamp, expiration TTL,
custom payload data, and metadata. Each token gets unique Cargo instance
named with 'token_' prefix plus token UUID for isolation and identification.</p>
<h2>Cargo Data Structure</h2>
<ul>
<li><strong>timestamp</strong>: Unix timestamp when token was created</li>
<li><strong>seconds_to_expire</strong>: TTL in seconds for expiration calculation</li>
<li><strong>custom</strong>: User-provided payload data (arbitrary array)</li>
<li>Additional metadata as needed for token operation</li>
</ul>
<h2>Cargo Integration Benefits</h2>
<ul>
<li>Consistent key-value storage interface</li>
<li>Built-in dirty flag tracking for optimization</li>
<li>Flexible data type support (primitives, arrays, objects)</li>
<li>Debugging and inspection capabilities via dump()</li>
<li>State management and change tracking</li>
</ul>
</section>

        <section class="phpdocumentor-description"><p>Cargo instance for this token's data storage</p>
</section>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#property_cargo#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Data-Cargo.html"><abbr title="\Primordyx\Data\Cargo">Cargo</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For complete Cargo system documentation</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\getCargo()">getCargo()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For public access to cargo instance</p>
</section>

                                    </dd>
                                            </dl>

    

    

</article>
                    <article
        class="
            phpdocumentor-element
            -property
            -protected
                                                                    "
>
    <h4 class="phpdocumentor-element__name" id="property_encryptionIsValid">
        $encryptionIsValid
        <a href="classes/Primordyx-Security-Token.html#property_encryptionIsValid" class="headerlink"><i class="fas fa-link"></i></a>

        <span class="phpdocumentor-element__modifiers">
                                            </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">202</span>

    </aside>

        <p class="phpdocumentor-summary">Validation flag indicating whether token encryption/decryption was successful</p>

    
    <code class="phpdocumentor-code phpdocumentor-signature ">
        <span class="phpdocumentor-signature__visibility">protected</span>
            <span class="phpdocumentor-signature__type">bool</span>
    <span class="phpdocumentor-signature__name">$encryptionIsValid</span>
     = <span class="phpdocumentor-signature__default-value">false</span></code>

        <section class="phpdocumentor-description"><p>Set to true when token is successfully created or loaded from encrypted string.
Set to false when decryption fails, token is malformed, or token is reset.
Used by validation methods to determine overall token validity state.</p>
<h2>State Transitions</h2>
<ul>
<li><strong>Construction</strong>: Defaults to false (no valid token yet)</li>
<li><strong>makeShareableToken()</strong>: Set to true after successful encryption</li>
<li><strong>loadFromShareableToken()</strong>: Set to true after successful decryption</li>
<li><strong>reset()</strong>: Set to false when token state is cleared</li>
<li><strong>Decryption failure</strong>: Set to false when encrypted token is invalid</li>
</ul>
<h2>Usage in Validation</h2>
<p>Primary flag checked by isValid(), isExpired(), and expiresAt() to determine
if token has valid encrypted state before performing time-based validation.</p>
</section>

        <section class="phpdocumentor-description"><p>True if token encryption/decryption succeeded, false otherwise</p>
</section>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#property_encryptionIsValid#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\isValid()">isValid()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For public access to validation state</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\makeShareableToken()">makeShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For token creation process</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\loadFromShareableToken()">loadFromShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For token loading process</p>
</section>

                                    </dd>
                                            </dl>

    

    

</article>
                    <article
        class="
            phpdocumentor-element
            -property
            -protected
                                                                    "
>
    <h4 class="phpdocumentor-element__name" id="property_isDirty">
        $isDirty
        <a href="classes/Primordyx-Security-Token.html#property_isDirty" class="headerlink"><i class="fas fa-link"></i></a>

        <span class="phpdocumentor-element__modifiers">
                                            </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">289</span>

    </aside>

        <p class="phpdocumentor-summary">Flag tracking whether token state has been modified since last clean state</p>

    
    <code class="phpdocumentor-code phpdocumentor-signature ">
        <span class="phpdocumentor-signature__visibility">protected</span>
            <span class="phpdocumentor-signature__type">bool</span>
    <span class="phpdocumentor-signature__name">$isDirty</span>
     = <span class="phpdocumentor-signature__default-value">true</span></code>

        <section class="phpdocumentor-description"><p>Tracks modifications to token-level properties (not cargo data) for optimization
and state management. Set to true when token state changes, false when token
reaches clean state after successful operations.</p>
<h2>Dirty State Triggers</h2>
<ul>
<li><strong>Construction</strong>: Set to true during __construct()</li>
<li><strong>Reset operations</strong>: Set to true during reset()</li>
<li><strong>Successful operations</strong>: Set to false after makeShareableToken()</li>
<li><strong>Load operations</strong>: Set to false after successful loadFromShareableToken()</li>
</ul>
<h2>Combined with Cargo State</h2>
<p>Used in conjunction with cargo dirty flag via isDirty() method to provide
comprehensive state tracking covering both token-level and data-level changes.</p>
<h2>Optimization Benefits</h2>
<p>Allows systems to avoid unnecessary re-encryption or serialization when
token state hasn't changed since last operation.</p>
</section>

        <section class="phpdocumentor-description"><p>True if token state modified since last clean state, false otherwise</p>
</section>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#property_isDirty#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\isDirty()">isDirty()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For combined token and cargo dirty state check</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\cargoIsDirty()">cargoIsDirty()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For cargo-only dirty state check</p>
</section>

                                    </dd>
                                            </dl>

    

    

</article>
                    <article
        class="
            phpdocumentor-element
            -property
            -protected
                                                                    "
>
    <h4 class="phpdocumentor-element__name" id="property_shareableToken">
        $shareableToken
        <a href="classes/Primordyx-Security-Token.html#property_shareableToken" class="headerlink"><i class="fas fa-link"></i></a>

        <span class="phpdocumentor-element__modifiers">
                                            </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">231</span>

    </aside>

        <p class="phpdocumentor-summary">Encrypted string representation of token for secure distribution</p>

    
    <code class="phpdocumentor-code phpdocumentor-signature ">
        <span class="phpdocumentor-signature__visibility">protected</span>
            <span class="phpdocumentor-signature__type">string</span>
    <span class="phpdocumentor-signature__name">$shareableToken</span>
     = <span class="phpdocumentor-signature__default-value">&#039;&#039;</span></code>

        <section class="phpdocumentor-description"><p>Contains the AES-256-GCM encrypted JSON serialization of complete token data
including UUID, timestamps, expiration, and custom payload. Safe for transmission
via URLs, API responses, email, or other insecure channels.</p>
<h2>Security Properties</h2>
<ul>
<li><strong>AES-256-GCM encryption</strong>: Military-grade encryption prevents tampering</li>
<li><strong>Opaque format</strong>: No information leakage about token contents</li>
<li><strong>URL-safe</strong>: Base64-encoded for safe transmission in URLs and headers</li>
<li><strong>Tamper-evident</strong>: Modified tokens fail decryption completely</li>
<li><strong>Self-contained</strong>: All validation data included in encrypted payload</li>
</ul>
<h2>Lifecycle States</h2>
<ul>
<li><strong>Empty string</strong>: Default state before token creation or after reset</li>
<li><strong>Encrypted data</strong>: Set after makeShareableToken() successful encryption</li>
<li><strong>'bogus'</strong>: Set when loadFromShareableToken() encounters decryption failure</li>
<li><strong>Preserved</strong>: Maintains original encrypted string during loadFromShareableToken()</li>
</ul>
</section>

        <section class="phpdocumentor-description"><p>Encrypted token string safe for public distribution</p>
</section>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#property_shareableToken#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\makeShareableToken()">makeShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For token encryption and string generation</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\getShareableToken()">getShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For public access to encrypted string</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\loadFromShareableToken()">loadFromShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For decryption and loading process</p>
</section>

                                    </dd>
                                            </dl>

    

    

</article>
                    <article
        class="
            phpdocumentor-element
            -property
            -protected
                                                                    "
>
    <h4 class="phpdocumentor-element__name" id="property_useUTC">
        $useUTC
        <a href="classes/Primordyx-Security-Token.html#property_useUTC" class="headerlink"><i class="fas fa-link"></i></a>

        <span class="phpdocumentor-element__modifiers">
                                            </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">316</span>

    </aside>

        <p class="phpdocumentor-summary">Configuration flag for timestamp formatting preference (UTC vs local time)</p>

    
    <code class="phpdocumentor-code phpdocumentor-signature ">
        <span class="phpdocumentor-signature__visibility">protected</span>
            <span class="phpdocumentor-signature__type">bool</span>
    <span class="phpdocumentor-signature__name">$useUTC</span>
     = <span class="phpdocumentor-signature__default-value">false</span></code>

        <section class="phpdocumentor-description"><p>Determines whether timestamp formatting methods use UTC or local system time
for human-readable output. Affects expiresAt() formatting and debug output
but not internal timestamp storage (always Unix timestamps).</p>
<h2>Time Handling Strategy</h2>
<ul>
<li><strong>Internal storage</strong>: Always Unix timestamps (timezone-neutral)</li>
<li><strong>Calculations</strong>: Always UTC-based for consistency</li>
<li><strong>Display formatting</strong>: Respects this flag for user presentation</li>
<li><strong>Default behavior</strong>: Local time (false) for user familiarity</li>
</ul>
<h2>Use Cases</h2>
<ul>
<li><strong>UTC preference</strong>: Global applications, logging, API responses</li>
<li><strong>Local preference</strong>: User-facing applications, local system integration</li>
<li><strong>Debugging</strong>: Consistent timestamp format across different environments</li>
</ul>
</section>

        <section class="phpdocumentor-description"><p>True for UTC timestamps, false for local time formatting</p>
</section>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#property_useUTC#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\__construct()">__construct()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For UTC preference initialization</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\expiresAt()">expiresAt()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For timestamp formatting using this preference</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\asArray()">asArray()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For debug output timestamp formatting</p>
</section>

                                    </dd>
                                            </dl>

    

    

</article>
                    <article
        class="
            phpdocumentor-element
            -property
            -protected
                                                                    "
>
    <h4 class="phpdocumentor-element__name" id="property_uuid">
        $uuid
        <a href="classes/Primordyx-Security-Token.html#property_uuid" class="headerlink"><i class="fas fa-link"></i></a>

        <span class="phpdocumentor-element__modifiers">
                                            </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">260</span>

    </aside>

        <p class="phpdocumentor-summary">Unique identifier for token instance and associated Cargo container</p>

    
    <code class="phpdocumentor-code phpdocumentor-signature ">
        <span class="phpdocumentor-signature__visibility">protected</span>
            <span class="phpdocumentor-signature__type">string</span>
    <span class="phpdocumentor-signature__name">$uuid</span>
     = <span class="phpdocumentor-signature__default-value">&#039;&#039;</span></code>

        <section class="phpdocumentor-description"><p>Cryptographically secure UUID generated during token construction using
Strings::uuid(). Serves as unique identifier for token instance and as
suffix for Cargo container naming ('token_' + UUID).</p>
<h2>UUID Properties</h2>
<ul>
<li><strong>Uniqueness</strong>: Cryptographically secure random generation</li>
<li><strong>Immutable</strong>: Set during construction and never changes</li>
<li><strong>Cargo Integration</strong>: Used to create unique Cargo container names</li>
<li><strong>Debugging</strong>: Helpful for token tracking and debugging</li>
<li><strong>Serialization</strong>: Included in token JSON for identification</li>
</ul>
<h2>Usage Patterns</h2>
<ul>
<li><strong>Token Identification</strong>: Unique reference for logging and debugging</li>
<li><strong>Cargo Naming</strong>: Creates isolated Cargo containers per token</li>
<li><strong>State Tracking</strong>: Helps identify token instances in complex scenarios</li>
<li><strong>Debugging</strong>: Included in debug output for token tracing</li>
</ul>
</section>

        <section class="phpdocumentor-description"><p>Cryptographically secure UUID for token identification</p>
</section>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#property_uuid#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\getUuid()">getUuid()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For public access to UUID</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Utils-Strings.html#method_uuid"><abbr title="\Primordyx\Utils\Strings::uuid()">Strings::uuid()</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For UUID generation implementation</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\__construct()">__construct()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For UUID initialization during construction</p>
</section>

                                    </dd>
                                            </dl>

    

    

</article>
            </section>

            <section class="phpdocumentor-methods">
        <h3 class="phpdocumentor-elements__header" id="methods">
            Methods
            <a href="classes/Primordyx-Security-Token.html#methods" class="headerlink"><i class="fas fa-link"></i></a>

        </h3>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method___construct">
        __construct()
        <a href="classes/Primordyx-Security-Token.html#method___construct" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">355</span>

    </aside>

        <p class="phpdocumentor-summary">Initialize new token instance with UUID generation and Cargo container setup</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">__construct</span><span>(</span><span class="phpdocumentor-signature__argument"><span>[</span><span class="phpdocumentor-signature__argument__return-type">bool&nbsp;</span><span class="phpdocumentor-signature__argument__name">$useUTC</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">false</span><span> ]</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Creates new token with cryptographically secure UUID, initializes associated
Cargo container for data storage, and configures timestamp formatting preference.
Each token gets isolated Cargo container named 'token_' + UUID.</p>
<h2>Initialization Process</h2>
<ol>
<li><strong>UTC Configuration</strong>: Store timestamp formatting preference</li>
<li><strong>State Setup</strong>: Mark token as dirty (newly created)</li>
<li><strong>UUID Generation</strong>: Create cryptographically secure unique identifier</li>
<li><strong>Cargo Creation</strong>: Initialize isolated Cargo container for token data</li>
</ol>
<h2>Container Isolation</h2>
<p>Each token uses separate Cargo container to prevent data conflicts between
multiple token instances and enable independent state management.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$useUTC</span>
                : <span class="phpdocumentor-signature__argument__return-type">bool</span>
                 = <span class="phpdocumentor-signature__argument__default-value">false</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Whether to use UTC time for timestamp formatting (default: false)</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method___construct#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link"><abbr title="\Exception">Exception</abbr></span>
                                                            
                                                 <section class="phpdocumentor-description"><p>If UUID generation or Cargo initialization fails</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Basic Token Creation</p>
<pre class="prettyprint"><code class="language-php">// Local time formatting
$token = new Token();

// UTC time formatting
$utcToken = new Token(true);

// Both tokens have unique UUIDs and isolated Cargo containers
echo $token-&gt;getUuid();     // &quot;12345678-1234-5678-9012-123456789012&quot;
echo $utcToken-&gt;getUuid();  // &quot;87654321-4321-8765-2109-876543210987&quot;
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Utils-Strings.html#method_uuid"><abbr title="\Primordyx\Utils\Strings::uuid()">Strings::uuid()</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For UUID generation implementation</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Data-Cargo.html#method_on"><abbr title="\Primordyx\Data\Cargo::on()">Cargo::on()</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For Cargo container creation</p>
</section>

                                    </dd>
                                            </dl>

    

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_asArray">
        asArray()
        <a href="classes/Primordyx-Security-Token.html#method_asArray" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">843</span>

    </aside>

        <p class="phpdocumentor-summary">Export complete token data as associative array for inspection and debugging</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">asArray</span><span>(</span><span class="phpdocumentor-signature__argument"><span>[</span><span class="phpdocumentor-signature__argument__return-type">bool&nbsp;</span><span class="phpdocumentor-signature__argument__name">$includeExtras</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">false</span><span> ]</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Converts token's Cargo data to array format with optional inclusion of
extensive debugging information including timestamps, validation state,
and internal metadata. Essential for token inspection and troubleshooting.</p>
<h2>Base Data Structure</h2>
<p>Returns cargo dump containing:</p>
<ul>
<li><strong>timestamp</strong>: Token creation Unix timestamp</li>
<li><strong>seconds_to_expire</strong>: TTL in seconds</li>
<li><strong>custom</strong>: User-provided payload data</li>
</ul>
<h2>Extended Debug Information (when includeExtras=true)</h2>
<ul>
<li><strong>uuid</strong>: Token unique identifier</li>
<li><strong>current_time</strong>: Current timestamp in ISO format</li>
<li><strong>expires_at</strong>: Expiration timestamp in ISO format</li>
<li><strong>is_expired</strong>: Boolean expiration status</li>
<li><strong>encryption_is_valid</strong>: Encryption validation state</li>
<li><strong>shareable_token</strong>: Encrypted token string</li>
<li><strong>is_dirty</strong>: Token dirty flag state</li>
<li><strong>cargo_is_dirty</strong>: Cargo dirty flag state</li>
<li><strong>cargo_dump</strong>: Raw cargo container contents</li>
</ul>
<h2>Use Cases</h2>
<ul>
<li><strong>Debugging</strong>: Complete token state inspection</li>
<li><strong>Logging</strong>: Detailed token information for audit trails</li>
<li><strong>Testing</strong>: Validation of token creation and loading</li>
<li><strong>API responses</strong>: Token metadata in development environments</li>
</ul>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$includeExtras</span>
                : <span class="phpdocumentor-signature__argument__return-type">bool</span>
                 = <span class="phpdocumentor-signature__argument__default-value">false</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Whether to include comprehensive debugging data (default: false)</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_asArray#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link"><abbr title="\Exception">Exception</abbr></span>
                                                            
                                                 <section class="phpdocumentor-description"><p>If Cargo dump() operation or time formatting fail</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Basic Token Data Export</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$encrypted = $token-&gt;makeShareableToken(3600, ['user_id' =&gt; 123]);

$basic = $token-&gt;asArray();
// Returns: [
//   'timestamp' =&gt; 1705334400,
//   'seconds_to_expire' =&gt; 3600,
//   'custom' =&gt; ['user_id' =&gt; 123]
// ]
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Debug Information Export</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$encrypted = $token-&gt;makeShareableToken(1800, ['action' =&gt; 'reset']);

$debug = $token-&gt;asArray(true);
// Returns comprehensive array with:
// - All basic data
// - uuid, current_time, expires_at
// - is_expired, encryption_is_valid
// - shareable_token, dirty flags
// - cargo_dump

// Log for debugging
error_log('Token debug: ' . json_encode($debug, JSON_PRETTY_PRINT));
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Token Comparison</p>
<pre class="prettyprint"><code class="language-php">$token1 = new Token();
$token2 = new Token();

$encrypted1 = $token1-&gt;makeShareableToken(3600, ['type' =&gt; 'A']);
$encrypted2 = $token2-&gt;makeShareableToken(7200, ['type' =&gt; 'B']);

$comparison = [
    'token1' =&gt; $token1-&gt;asArray(true),
    'token2' =&gt; $token2-&gt;asArray(true)
];

// Compare token properties
$ttlDiff = $comparison['token2']['seconds_to_expire'] -
           $comparison['token1']['seconds_to_expire'];
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\asJson()">asJson()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For JSON format export</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\getCargo()">getCargo()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For direct access to cargo data</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Data-Cargo.html#method_dump"><abbr title="\Primordyx\Data\Cargo::dump()">Cargo::dump()</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For cargo data extraction</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>Associative array of token data and optional debug information</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_asJson">
        asJson()
        <a href="classes/Primordyx-Security-Token.html#method_asJson" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">952</span>

    </aside>

        <p class="phpdocumentor-summary">Export token data as JSON string with optional pretty-printing</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">asJson</span><span>(</span><span class="phpdocumentor-signature__argument"><span>[</span><span class="phpdocumentor-signature__argument__return-type">bool&nbsp;</span><span class="phpdocumentor-signature__argument__name">$includeExtras</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">false</span><span> ]</span></span><span class="phpdocumentor-signature__argument"><span>[</span><span>, </span><span class="phpdocumentor-signature__argument__return-type">bool&nbsp;</span><span class="phpdocumentor-signature__argument__name">$pretty</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">false</span><span> ]</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">string</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Converts complete token data to JSON format using asArray() as base, with
configurable pretty-printing for human readability. Handles JSON encoding
failures with appropriate exceptions.</p>
<h2>JSON Formatting Options</h2>
<ul>
<li><strong>Compact</strong>: Single-line JSON for storage/transmission efficiency</li>
<li><strong>Pretty</strong>: Multi-line indented JSON for debugging and readability</li>
<li><strong>Consistent</strong>: Reliable JSON encoding with error handling</li>
<li><strong>UTF-8</strong>: Proper Unicode handling for international data</li>
</ul>
<h2>Output Applications</h2>
<ul>
<li><strong>API responses</strong>: Token metadata in JSON format</li>
<li><strong>Configuration files</strong>: Token data persistence</li>
<li><strong>Logging systems</strong>: Structured token information</li>
<li><strong>Debugging</strong>: Human-readable token inspection</li>
<li><strong>Token serialization</strong>: Internal JSON representation for encryption</li>
</ul>
<h2>Error Handling</h2>
<p>Throws JsonException if JSON encoding fails due to:</p>
<ul>
<li>Non-UTF-8 data in token payload</li>
<li>Circular references in custom data</li>
<li>Resource types in custom payload</li>
<li>Other JSON encoding limitations</li>
</ul>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$includeExtras</span>
                : <span class="phpdocumentor-signature__argument__return-type">bool</span>
                 = <span class="phpdocumentor-signature__argument__default-value">false</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Whether to include debug information (default: false)</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$pretty</span>
                : <span class="phpdocumentor-signature__argument__return-type">bool</span>
                 = <span class="phpdocumentor-signature__argument__default-value">false</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Whether to format JSON with indentation (default: false)</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_asJson#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link"><abbr title="\JsonException">JsonException</abbr></span>
                                                            
                                                 <section class="phpdocumentor-description"><p>If JSON encoding fails due to invalid data</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link"><abbr title="\Exception">Exception</abbr></span>
                                                            
                                                 <section class="phpdocumentor-description"><p>If underlying asArray() operation fails</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Compact JSON for Storage</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$encrypted = $token-&gt;makeShareableToken(3600, ['user' =&gt; 'john']);

$json = $token-&gt;asJson();
// Returns: {&quot;timestamp&quot;:1705334400,&quot;seconds_to_expire&quot;:3600,&quot;custom&quot;:{&quot;user&quot;:&quot;john&quot;}}

// Store in database or cache
$redis-&gt;set(&quot;token_data:{$token-&gt;getUuid()}&quot;, $json, 3600);
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Pretty-Printed Debug Output</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$encrypted = $token-&gt;makeShareableToken(1800, [
    'user_id' =&gt; 123,
    'permissions' =&gt; ['read', 'write'],
    'metadata' =&gt; ['ip' =&gt; '192.168.1.1', 'agent' =&gt; 'Chrome']
]);

$prettyJson = $token-&gt;asJson(true, true);
echo $prettyJson;
// Returns formatted JSON:
// {
//   &quot;timestamp&quot;: 1705334400,
//   &quot;seconds_to_expire&quot;: 1800,
//   &quot;custom&quot;: {
//     &quot;user_id&quot;: 123,
//     &quot;permissions&quot;: [&quot;read&quot;, &quot;write&quot;],
//     &quot;metadata&quot;: {
//       &quot;ip&quot;: &quot;192.168.1.1&quot;,
//       &quot;agent&quot;: &quot;Chrome&quot;
//     }
//   },
//   &quot;uuid&quot;: &quot;...&quot;,
//   &quot;expires_at&quot;: &quot;2025-01-15T15:00:00.000Z&quot;
// }
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Error Handling</p>
<pre class="prettyprint"><code class="language-php">try {
    $json = $token-&gt;asJson(true);
    logTokenData($json);
} catch (JsonException $e) {
    logError('Token JSON encoding failed', [
        'token_uuid' =&gt; $token-&gt;getUuid(),
        'error' =&gt; $e-&gt;getMessage()
    ]);
}
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\asArray()">asArray()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For array format data export</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\makeShareableToken()">makeShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>Where JSON serialization is used internally</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">string</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>JSON representation of token data</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_cargoIsDirty">
        cargoIsDirty()
        <a href="classes/Primordyx-Security-Token.html#method_cargoIsDirty" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1345</span>

    </aside>

        <p class="phpdocumentor-summary">Check if internal Cargo container has unsaved changes</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">cargoIsDirty</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">bool</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Returns dirty flag state from associated Cargo container indicating whether
cargo data has been modified since last clean state. Useful for optimization
and state management decisions.</p>
<h2>Cargo Dirty State Triggers</h2>
<ul>
<li><strong>Data modifications</strong>: set(), forget(), flush() operations</li>
<li><strong>Bulk operations</strong>: loadFromArray(), replace() operations</li>
<li><strong>State changes</strong>: Any cargo data manipulation</li>
</ul>
<h2>Clean State Conditions</h2>
<ul>
<li><strong>Initial state</strong>: New cargo containers start clean</li>
<li><strong>After makeShareableToken()</strong>: Cargo marked clean after encryption</li>
<li><strong>After loadFromShareableToken()</strong>: Cargo marked clean after loading</li>
<li><strong>Manual cleanup</strong>: Explicit setDirty(false) calls</li>
</ul>
<h2>Optimization Usage</h2>
<p>Check dirty state to avoid unnecessary re-encryption or serialization
when token data hasn't changed since last operation.</p>
</section>

    
    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_cargoIsDirty#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Conditional Token Re-encryption</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$encrypted = $token-&gt;makeShareableToken(3600, ['user' =&gt; 123]);

// Later, check if re-encryption needed
if ($token-&gt;cargoIsDirty() || $token-&gt;isDirty()) {
    // Token or cargo state changed, re-encrypt
    $newEncrypted = $token-&gt;makeShareableToken(3600);
} else {
    // Use existing encrypted token
    $newEncrypted = $token-&gt;getShareableToken();
}
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>State Monitoring</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$cargo = $token-&gt;getCargo();

echo &quot;Initial cargo dirty: &quot; . ($token-&gt;cargoIsDirty() ? 'Yes' : 'No') . &quot;\n&quot;;

$cargo-&gt;set('custom', ['test' =&gt; 'data']);
echo &quot;After set cargo dirty: &quot; . ($token-&gt;cargoIsDirty() ? 'Yes' : 'No') . &quot;\n&quot;;

$token-&gt;makeShareableToken(3600);
echo &quot;After encrypt cargo dirty: &quot; . ($token-&gt;cargoIsDirty() ? 'Yes' : 'No') . &quot;\n&quot;;
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\isDirty()">isDirty()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For combined token and cargo dirty state</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Data-Cargo.html#method_isDirty"><abbr title="\Primordyx\Data\Cargo::isDirty()">Cargo::isDirty()</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For direct cargo dirty flag access</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\makeShareableToken()">makeShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For operations that clean cargo state</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">bool</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>True if cargo has unsaved changes, false if clean</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_expiresAt">
        expiresAt()
        <a href="classes/Primordyx-Security-Token.html#method_expiresAt" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">739</span>

    </aside>

        <p class="phpdocumentor-summary">Get human-readable ISO-formatted expiration timestamp</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">expiresAt</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">string</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Calculates and formats token expiration time as ISO 8601 timestamp string
using configured UTC or local time preference. Handles invalid tokens and
missing data gracefully with descriptive error messages.</p>
<h2>Timestamp Calculation</h2>
<ul>
<li><strong>Base time</strong>: Token creation timestamp from Cargo</li>
<li><strong>Expiration</strong>: Creation time + seconds_to_expire (TTL)</li>
<li><strong>Formatting</strong>: ISO 8601 format via TimeHelper::iso()</li>
<li><strong>Timezone</strong>: Respects $useUTC setting from constructor</li>
</ul>
<h2>Error Conditions</h2>
<ul>
<li><strong>Invalid encryption</strong>: &quot;Unable to determine. Encryption is invalid&quot;</li>
<li><strong>Missing TTL</strong>: &quot;Unable to determine - missing timestamp or TTL&quot;</li>
<li><strong>Invalid timestamps</strong>: &quot;Unable to determine - missing timestamp or TTL&quot;</li>
<li><strong>Zero TTL</strong>: Still calculates expiration (creation time + 0)</li>
</ul>
<h2>Format Examples</h2>
<ul>
<li><strong>UTC</strong>: &quot;2025-01-15T14:30:00.000Z&quot;</li>
<li><strong>Local</strong>: &quot;2025-01-15T09:30:00.000-05:00&quot;</li>
<li><strong>Error</strong>: &quot;Unable to determine. Encryption is invalid&quot;</li>
</ul>
</section>

    
    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_expiresAt#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link"><abbr title="\Exception">Exception</abbr></span>
                                                            
                                                 <section class="phpdocumentor-description"><p>If Cargo operations or TimeHelper formatting fail</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Expiration Display</p>
<pre class="prettyprint"><code class="language-php">$token = new Token(true); // UTC timestamps
$encrypted = $token-&gt;makeShareableToken(3600); // 1 hour

echo &quot;Token expires at: &quot; . $token-&gt;expiresAt();
// Output: &quot;Token expires at: 2025-01-15T15:30:00.000Z&quot;

// Check expiration for user display
if (!$token-&gt;isExpired()) {
    $timeLeft = strtotime($token-&gt;expiresAt()) - time();
    echo &quot;Token valid for &quot; . $timeLeft . &quot; more seconds&quot;;
}
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>API Response with Expiration</p>
<pre class="prettyprint"><code class="language-php">function createApiToken($userId) {
    $token = new Token();
    $encrypted = $token-&gt;makeShareableToken(86400, ['user_id' =&gt; $userId]);

    return [
        'access_token' =&gt; $encrypted,
        'expires_at' =&gt; $token-&gt;expiresAt(),
        'expires_in' =&gt; 86400
    ];
}
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Error Handling</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$expiration = $token-&gt;expiresAt();

if (strpos($expiration, 'Unable to determine') !== false) {
    // Handle invalid token
    logError('Invalid token expiration check', $token-&gt;getUuid());
} else {
    // Valid expiration timestamp
    $expiryTime = strtotime($expiration);
}
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Time-TimeHelper.html#method_iso"><abbr title="\Primordyx\Time\TimeHelper::iso()">TimeHelper::iso()</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For timestamp formatting implementation</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\isExpired()">isExpired()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For boolean expiration check</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\makeShareableToken()">makeShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For TTL configuration</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">string</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>ISO 8601 formatted expiration timestamp or error message</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_getCargo">
        getCargo()
        <a href="classes/Primordyx-Security-Token.html#method_getCargo" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1043</span>

    </aside>

        <p class="phpdocumentor-summary">Get direct access to internal Cargo container for advanced data operations</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">getCargo</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type"><abbr title="\Primordyx\Security\cargo">cargo</abbr></span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Provides public access to the token's Cargo instance for direct manipulation
of token data, custom payload access, and advanced state management. Use with
caution as direct cargo modifications can affect token integrity.</p>
<h2>Cargo Access Capabilities</h2>
<ul>
<li><strong>Direct data access</strong>: Get/set individual cargo keys</li>
<li><strong>Payload manipulation</strong>: Modify custom data after token creation</li>
<li><strong>State inspection</strong>: Check cargo dirty flags and metadata</li>
<li><strong>Advanced operations</strong>: Use full Cargo API for complex data handling</li>
</ul>
<h2>Common Usage Patterns</h2>
<ul>
<li><strong>Payload extraction</strong>: <code class="prettyprint">$cargo-&gt;get('custom', [])</code></li>
<li><strong>Data modification</strong>: <code class="prettyprint">$cargo-&gt;set('custom', $newData)</code></li>
<li><strong>State checking</strong>: <code class="prettyprint">$cargo-&gt;isDirty()</code></li>
<li><strong>Debugging</strong>: <code class="prettyprint">$cargo-&gt;dump()</code></li>
</ul>
<h2>Integrity Considerations</h2>
<p>Direct cargo modifications bypass token state management:</p>
<ul>
<li>Changes don't automatically update shareableToken</li>
<li>Modifications don't trigger dirty flag updates</li>
<li>Consider calling makeShareableToken() after changes</li>
<li>Be careful with timestamp and TTL modifications</li>
</ul>
</section>

    
    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_getCargo#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Custom Payload Access</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$encrypted = $token-&gt;makeShareableToken(3600, [
    'user_id' =&gt; 123,
    'roles' =&gt; ['admin', 'editor']
]);

// Access custom payload data
$cargo = $token-&gt;getCargo();
$customData = $cargo-&gt;get('custom', []);
$userId = $customData['user_id']; // 123
$roles = $customData['roles'];   // ['admin', 'editor']
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Dynamic Token Modification</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$encrypted = $token-&gt;makeShareableToken(3600, ['user' =&gt; 'john']);

// Later, add additional data to token
$cargo = $token-&gt;getCargo();
$existing = $cargo-&gt;get('custom', []);
$existing['last_activity'] = time();
$existing['permissions'] = ['read', 'write'];
$cargo-&gt;set('custom', $existing);

// Re-encrypt token with updated data
$newEncrypted = $token-&gt;makeShareableToken(
    $cargo-&gt;get('seconds_to_expire', 3600),
    $existing
);
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Advanced State Management</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$cargo = $token-&gt;getCargo();

// Check if token data has been modified
if ($cargo-&gt;isDirty()) {
    // Re-encrypt token due to changes
    $newEncrypted = $token-&gt;makeShareableToken(3600);
}

// Inspect all cargo data
$allData = $cargo-&gt;dump();
foreach ($allData as $key =&gt; $value) {
    echo &quot;Key: $key, Value: &quot; . json_encode($value) . &quot;\n&quot;;
}
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Data-Cargo.html"><abbr title="\Primordyx\Data\Cargo">Cargo</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For complete Cargo system documentation</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\makeShareableToken()">makeShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For re-encrypting after cargo modifications</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\asArray()">asArray()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For read-only access to cargo data</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type"><abbr title="\Primordyx\Security\cargo">cargo</abbr></span>
                    &mdash;
                <section class="phpdocumentor-description"><p>Direct reference to token's Cargo container instance</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_getShareableToken">
        getShareableToken()
        <a href="classes/Primordyx-Security-Token.html#method_getShareableToken" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1193</span>

    </aside>

        <p class="phpdocumentor-summary">Get encrypted token string for secure distribution and storage</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">getShareableToken</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">string</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Returns the AES-256-GCM encrypted representation of complete token data
safe for transmission via URLs, API responses, email, or other channels.
Empty string if token hasn't been encrypted yet via makeShareableToken().</p>
<h2>Token String Properties</h2>
<ul>
<li><strong>Encryption</strong>: AES-256-GCM encrypted JSON payload</li>
<li><strong>URL-safe</strong>: Base64 encoded for safe URL transmission</li>
<li><strong>Self-contained</strong>: All validation data included</li>
<li><strong>Tamper-evident</strong>: Modified strings fail decryption</li>
<li><strong>Opaque</strong>: No information leakage about contents</li>
</ul>
<h2>Lifecycle States</h2>
<ul>
<li><strong>Empty</strong>: Default state before encryption</li>
<li><strong>Encrypted</strong>: Contains valid encrypted token after makeShareableToken()</li>
<li><strong>Preserved</strong>: Maintains original string after loadFromShareableToken()</li>
<li><strong>'bogus'</strong>: Set when decryption fails during loading</li>
</ul>
<h2>Distribution Methods</h2>
<p>Safe for use in URLs, headers, form fields, API responses, email,
database storage, or any transmission method.</p>
</section>

    
    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_getShareableToken#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>URL Parameter Distribution</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$encrypted = $token-&gt;makeShareableToken(1800, ['user' =&gt; 123]);
$tokenString = $token-&gt;getShareableToken();

// Safe for URL transmission
$resetUrl = &quot;https://example.com/reset?token=&quot; . urlencode($tokenString);
sendEmail($user-&gt;email, &quot;Password Reset&quot;, &quot;Click: $resetUrl&quot;);
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>API Response Distribution</p>
<pre class="prettyprint"><code class="language-php">function createAuthToken($userId) {
    $token = new Token();
    $encrypted = $token-&gt;makeShareableToken(86400, [
        'user_id' =&gt; $userId,
        'issued_at' =&gt; time()
    ]);

    return [
        'access_token' =&gt; $token-&gt;getShareableToken(),
        'token_type' =&gt; 'Bearer',
        'expires_in' =&gt; 86400
    ];
}
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Token Persistence</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$encrypted = $token-&gt;makeShareableToken(7200);

// Store in database
$db-&gt;insert('active_tokens', [
    'uuid' =&gt; $token-&gt;getUuid(),
    'encrypted_data' =&gt; $token-&gt;getShareableToken(),
    'expires_at' =&gt; date('Y-m-d H:i:s', time() + 7200)
]);

// Later retrieval
$row = $db-&gt;select('active_tokens')-&gt;where('uuid', $token-&gt;getUuid())-&gt;first();
$storedTokenString = $row['encrypted_data'];
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\makeShareableToken()">makeShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For creating encrypted token string</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\loadFromShareableToken()">loadFromShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For loading from encrypted string</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">string</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>Encrypted token string or empty string if not yet encrypted</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_getUuid">
        getUuid()
        <a href="classes/Primordyx-Security-Token.html#method_getUuid" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1113</span>

    </aside>

        <p class="phpdocumentor-summary">Get unique identifier assigned to this token instance</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">getUuid</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">string</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Returns the cryptographically secure UUID generated during token construction.
UUID serves as unique identifier for the token and is used for Cargo container
naming, debugging, and logging purposes.</p>
<h2>UUID Characteristics</h2>
<ul>
<li><strong>Uniqueness</strong>: Cryptographically secure random generation</li>
<li><strong>Immutability</strong>: Never changes during token lifetime</li>
<li><strong>Format</strong>: Standard UUID format (8-4-4-4-12 hex digits)</li>
<li><strong>Cargo integration</strong>: Used in 'token_' + UUID cargo naming</li>
<li><strong>Debugging</strong>: Helpful for token tracking and identification</li>
</ul>
<h2>Use Cases</h2>
<ul>
<li><strong>Logging</strong>: Token identification in audit logs</li>
<li><strong>Debugging</strong>: Token instance tracking during development</li>
<li><strong>Caching</strong>: Cache keys for token-related data</li>
<li><strong>Database storage</strong>: Primary key for token persistence</li>
<li><strong>Correlation</strong>: Link token operations across system components</li>
</ul>
</section>

    
    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_getUuid#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Token Identification in Logging</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$encrypted = $token-&gt;makeShareableToken(3600, ['action' =&gt; 'login']);

// Log token creation
logSecurityEvent('token_created', [
    'uuid' =&gt; $token-&gt;getUuid(),
    'ttl' =&gt; 3600,
    'action' =&gt; 'login',
    'timestamp' =&gt; time()
]);
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Token Tracking Across Requests</p>
<pre class="prettyprint"><code class="language-php">// Request 1: Create token
$token = new Token();
$encrypted = $token-&gt;makeShareableToken(1800);
$tokenId = $token-&gt;getUuid();

// Store for later reference
$redis-&gt;set(&quot;active_token:$tokenId&quot;, $encrypted, 1800);

// Request 2: Validate token
$receivedToken = $_POST['token'];
$validationToken = new Token();

if ($validationToken-&gt;loadFromShareableToken($receivedToken)) {
    $validationId = $validationToken-&gt;getUuid();

    // Check if token is in active list
    if ($redis-&gt;exists(&quot;active_token:$validationId&quot;)) {
        echo &quot;Token $validationId is valid and active&quot;;
    }
}
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\__construct()">__construct()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For UUID generation during token creation</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Utils-Strings.html#method_uuid"><abbr title="\Primordyx\Utils\Strings::uuid()">Strings::uuid()</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For UUID generation implementation</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">string</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>Cryptographically secure UUID string</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_isDirty">
        isDirty()
        <a href="classes/Primordyx-Security-Token.html#method_isDirty" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1438</span>

    </aside>

        <p class="phpdocumentor-summary">Check if token or its cargo has unsaved changes</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">isDirty</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">bool</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Returns combined dirty state from both token-level modifications and
Cargo container changes. Provides comprehensive state tracking for
optimization and consistency decisions.</p>
<h2>Combined State Logic</h2>
<p>Returns true if either:</p>
<ul>
<li>Token-level state has changed (encryption, loading, etc.)</li>
<li>Cargo data has been modified (payload, metadata, etc.)</li>
</ul>
<h2>Dirty State Sources</h2>
<ul>
<li><strong>Token level</strong>: Construction, reset, loading operations</li>
<li><strong>Cargo level</strong>: Data modifications, bulk operations</li>
<li><strong>State changes</strong>: Any modification affecting token integrity</li>
</ul>
<h2>Clean State Achievement</h2>
<p>Both token and cargo must be clean for isDirty() to return false:</p>
<ul>
<li>Token marked clean after successful encryption/loading</li>
<li>Cargo marked clean after makeShareableToken() or loading</li>
</ul>
<h2>Performance Optimization</h2>
<p>Use to avoid unnecessary operations when token state unchanged:</p>
<ul>
<li>Skip re-encryption if not dirty</li>
<li>Avoid redundant serialization</li>
<li>Optimize caching decisions</li>
</ul>
</section>

    
    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_isDirty#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>State-Based Cache Management</p>
<pre class="prettyprint"><code class="language-php">class TokenCache {
    private static $cache = [];

    public static function getEncrypted($token) {
        $uuid = $token-&gt;getUuid();

        // Return cached if token hasn't changed
        if (!$token-&gt;isDirty() &amp;&amp; isset(self::$cache[$uuid])) {
            return self::$cache[$uuid];
        }

        // Re-encrypt and cache
        $encrypted = $token-&gt;makeShareableToken(3600);
        self::$cache[$uuid] = $encrypted;
        return $encrypted;
    }
}
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Development State Monitoring</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
echo &quot;New token dirty: &quot; . ($token-&gt;isDirty() ? 'Yes' : 'No') . &quot;\n&quot;; // Yes

$encrypted = $token-&gt;makeShareableToken(3600);
echo &quot;After encrypt dirty: &quot; . ($token-&gt;isDirty() ? 'Yes' : 'No') . &quot;\n&quot;; // No

$token-&gt;getCargo()-&gt;set('custom', ['modified' =&gt; true]);
echo &quot;After modify dirty: &quot; . ($token-&gt;isDirty() ? 'Yes' : 'No') . &quot;\n&quot;; // Yes
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Conditional Operations</p>
<pre class="prettyprint"><code class="language-php">function updateTokenIfNeeded($token, $newData) {
    $cargo = $token-&gt;getCargo();
    $existing = $cargo-&gt;get('custom', []);

    // Only update if data actually changed
    if ($existing !== $newData) {
        $cargo-&gt;set('custom', $newData);

        // Re-encrypt only if there are changes
        if ($token-&gt;isDirty()) {
            return $token-&gt;makeShareableToken(3600, $newData);
        }
    }

    return $token-&gt;getShareableToken();
}
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\cargoIsDirty()">cargoIsDirty()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For cargo-only dirty state check</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\makeShareableToken()">makeShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For operations that clean both states</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\loadFromShareableToken()">loadFromShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For operations that clean both states</p>
</section>

                                    </dd>
                        </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">bool</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>True if token or cargo has unsaved changes, false if both clean</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_isExpired">
        isExpired()
        <a href="classes/Primordyx-Security-Token.html#method_isExpired" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">653</span>

    </aside>

        <p class="phpdocumentor-summary">Check if token has exceeded its configured expiration time</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">isExpired</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">bool</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Performs time-based validation by comparing token creation timestamp plus
TTL against current time. Returns true if token is past expiration or has
invalid encryption state.</p>
<h2>Expiration Logic</h2>
<ol>
<li><strong>Encryption Check</strong>: Invalid encryption automatically means expired</li>
<li><strong>TTL Validation</strong>: Zero or negative TTL means never expires</li>
<li><strong>Time Calculation</strong>: (creation_time + ttl) &lt;= current_time = expired</li>
<li><strong>Timestamp Validation</strong>: Missing timestamps treated as expired</li>
</ol>
<h2>Edge Cases Handled</h2>
<ul>
<li><strong>Invalid encryption</strong>: Always returns true (expired)</li>
<li><strong>Zero TTL</strong>: Returns false (never expires)</li>
<li><strong>Negative TTL</strong>: Returns false (never expires)</li>
<li><strong>Missing timestamps</strong>: Returns true (expired/invalid)</li>
<li><strong>Clock skew</strong>: Uses system time consistently</li>
</ul>
<h2>Security Considerations</h2>
<p>Expiration check prevents token reuse after intended lifetime,
essential for password reset tokens, API access tokens, and
temporary authorization mechanisms.</p>
</section>

    
    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_isExpired#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Token Expiration Handling</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
if ($token-&gt;loadFromShareableToken($receivedToken)) {
    if ($token-&gt;isExpired()) {
        // Handle expired token
        logSecurityEvent('expired_token_used', $token-&gt;getUuid());
        throw new TokenExpiredException('Token has expired');
    } else {
        // Token is valid, proceed with operation
        processAuthorizedRequest($token);
    }
}
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Session Token Validation</p>
<pre class="prettyprint"><code class="language-php">class AuthMiddleware {
    public function handle($request) {
        $tokenString = $request-&gt;bearerToken();
        $token = new Token();

        if ($token-&gt;loadFromShareableToken($tokenString)) {
            if (!$token-&gt;isExpired()) {
                $request-&gt;setUser($token-&gt;getCargo()-&gt;get('custom')['user_id']);
                return; // Continue to next middleware
            }
        }

        throw new UnauthorizedException('Invalid or expired token');
    }
}
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\expiresAt()">expiresAt()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For human-readable expiration time</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\isValid()">isValid()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For overall token validity including encryption</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\makeShareableToken()">makeShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For TTL configuration during token creation</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">bool</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>True if token is expired or invalid, false if still valid</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_isValid">
        isValid()
        <a href="classes/Primordyx-Security-Token.html#method_isValid" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1282</span>

    </aside>

        <p class="phpdocumentor-summary">Check overall token validity based on encryption state</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">isValid</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">bool</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Returns encryption validation flag indicating whether token has been
successfully created or loaded from valid encrypted string. Primary
validity check that should be used before accessing token data.</p>
<h2>Validity Conditions</h2>
<ul>
<li><strong>True</strong>: Token successfully created via makeShareableToken()</li>
<li><strong>True</strong>: Token successfully loaded via loadFromShareableToken()</li>
<li><strong>False</strong>: Newly constructed token (no data yet)</li>
<li><strong>False</strong>: Failed decryption during loadFromShareableToken()</li>
<li><strong>False</strong>: Token reset due to errors or invalid state</li>
</ul>
<h2>Validation Hierarchy</h2>
<ol>
<li><strong>isValid()</strong>: Core encryption/decryption success</li>
<li><strong>isExpired()</strong>: Time-based expiration (requires valid token)</li>
<li><strong>Custom validation</strong>: Application-specific payload validation</li>
</ol>
<h2>Usage Pattern</h2>
<p>Always check isValid() before isExpired() or accessing token data
to ensure token has valid encrypted state for further validation.</p>
</section>

    
    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_isValid#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Standard Token Validation</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();

if ($token-&gt;loadFromShareableToken($receivedToken)) {
    if ($token-&gt;isValid()) {
        if (!$token-&gt;isExpired()) {
            // Token is fully valid, proceed with operation
            $payload = $token-&gt;getCargo()-&gt;get('custom', []);
            processAuthorizedRequest($payload);
        } else {
            logSecurityEvent('expired_token_used');
            throw new TokenExpiredException();
        }
    } else {
        logSecurityEvent('invalid_token_state');
        throw new InvalidTokenException();
    }
} else {
    logSecurityEvent('token_decryption_failed');
    throw new TokenDecryptionException();
}
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>API Middleware Validation</p>
<pre class="prettyprint"><code class="language-php">class TokenValidationMiddleware {
    public function handle($request, $next) {
        $tokenString = $request-&gt;bearerToken();

        if (!$tokenString) {
            return response('Missing token', 401);
        }

        $token = new Token();
        if (!$token-&gt;loadFromShareableToken($tokenString)) {
            return response('Invalid token format', 401);
        }

        if (!$token-&gt;isValid()) {
            return response('Token validation failed', 401);
        }

        if ($token-&gt;isExpired()) {
            return response('Token expired', 401);
        }

        // Attach token data to request
        $request-&gt;setToken($token);
        return $next($request);
    }
}
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\makeShareableToken()">makeShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For creating valid tokens</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\loadFromShareableToken()">loadFromShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For loading and validating tokens</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\isExpired()">isExpired()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For time-based validation of valid tokens</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">bool</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>True if token has valid encryption state, false otherwise</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_loadFromShareableToken">
        loadFromShareableToken()
        <a href="classes/Primordyx-Security-Token.html#method_loadFromShareableToken" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">521</span>

    </aside>

        <p class="phpdocumentor-summary">Load and validate token state from encrypted shareable string</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">loadFromShareableToken</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$shareableToken</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">bool</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Attempts to decrypt provided encrypted token string, validate JSON structure,
and restore complete token state including Cargo data. Handles decryption
failures gracefully by resetting token to invalid state.</p>
<h2>Loading Process</h2>
<ol>
<li><strong>Decryption</strong>: Attempt AES-256-GCM decryption via Crypto::decrypt()</li>
<li><strong>JSON Validation</strong>: Parse decrypted text as JSON array</li>
<li><strong>UUID Extraction</strong>: Get token UUID or generate new one if missing</li>
<li><strong>Cargo Restoration</strong>: Load Cargo container and populate with token data</li>
<li><strong>State Update</strong>: Mark token as valid and not dirty</li>
<li><strong>Token Storage</strong>: Preserve original encrypted string</li>
</ol>
<h2>Error Handling</h2>
<ul>
<li><strong>Decryption failure</strong>: Reset token state, mark as invalid</li>
<li><strong>JSON parsing failure</strong>: Reset token state, return false</li>
<li><strong>Data corruption</strong>: Gracefully handle missing or invalid fields</li>
<li><strong>State preservation</strong>: Maintain token consistency during failures</li>
</ul>
<h2>Security Validation</h2>
<ul>
<li><strong>Tamper detection</strong>: Failed decryption indicates token modification</li>
<li><strong>Format validation</strong>: Ensures token structure meets expectations</li>
<li><strong>State isolation</strong>: Loading doesn't affect other token instances</li>
</ul>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$shareableToken</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>AES-256-GCM encrypted token string to load</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_loadFromShareableToken#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link"><abbr title="\Exception">Exception</abbr></span>
                                                            
                                                 <section class="phpdocumentor-description"><p>If Cargo operations fail during loading process</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Token Validation Flow</p>
<pre class="prettyprint"><code class="language-php">// Receive token from request
$tokenString = $_GET['token'] ?? '';

$token = new Token();
if ($token-&gt;loadFromShareableToken($tokenString)) {
    if (!$token-&gt;isExpired()) {
        // Token is valid and not expired
        $payload = $token-&gt;getCargo()-&gt;get('custom', []);
        $userId = $payload['user_id'] ?? null;

        if ($userId) {
            // Proceed with authorized operation
            processPasswordReset($userId);
        }
    } else {
        throw new TokenExpiredException('Token has expired');
    }
} else {
    throw new InvalidTokenException('Token is invalid or tampered');
}
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Batch Token Processing</p>
<pre class="prettyprint"><code class="language-php">$tokens = $_POST['tokens'] ?? [];
$validTokens = [];

foreach ($tokens as $tokenString) {
    $token = new Token();
    if ($token-&gt;loadFromShareableToken($tokenString)) {
        if (!$token-&gt;isExpired()) {
            $validTokens[] = [
                'token' =&gt; $token,
                'payload' =&gt; $token-&gt;getCargo()-&gt;get('custom', [])
            ];
        }
    }
}
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Security-Crypto.html#method_decrypt"><abbr title="\Primordyx\Security\Crypto::decrypt()">Crypto::decrypt()</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For decryption implementation</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\reset()">reset()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For token state reset during failures</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\isExpired()">isExpired()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For expiration validation after loading</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\getCargo()">getCargo()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For accessing loaded payload data</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">bool</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>True if token successfully loaded and validated, false on failure</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_makeShareableToken">
        makeShareableToken()
        <a href="classes/Primordyx-Security-Token.html#method_makeShareableToken" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">428</span>

    </aside>

        <p class="phpdocumentor-summary">Create encrypted shareable token with expiration and custom payload</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">makeShareableToken</span><span>(</span><span class="phpdocumentor-signature__argument"><span>[</span><span class="phpdocumentor-signature__argument__return-type">int&nbsp;</span><span class="phpdocumentor-signature__argument__name">$secondsToExpire</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">60</span><span> ]</span></span><span class="phpdocumentor-signature__argument"><span>[</span><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$customContents</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">[]</span><span> ]</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">string</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Generates secure encrypted token by storing timestamp, TTL, and custom data in
Cargo container, then encrypting complete JSON representation. Returns encrypted
string safe for distribution via URLs, APIs, or storage systems.</p>
<h2>Token Generation Process</h2>
<ol>
<li><strong>Timestamp Storage</strong>: Current Unix timestamp for expiration calculation</li>
<li><strong>TTL Configuration</strong>: Seconds-to-expiration for time-based validation</li>
<li><strong>Payload Storage</strong>: Custom data array in Cargo 'custom' key</li>
<li><strong>JSON Serialization</strong>: Complete token data to JSON format</li>
<li><strong>Encryption</strong>: AES-256-GCM encryption of JSON via Crypto::encrypt()</li>
<li><strong>State Management</strong>: Mark token and cargo as clean (not dirty)</li>
</ol>
<h2>Security Considerations</h2>
<ul>
<li><strong>Encryption</strong>: Uses AES-256-GCM for tamper-evident security</li>
<li><strong>Timestamp integrity</strong>: Creation time prevents backdating attacks</li>
<li><strong>Payload protection</strong>: Custom data encrypted and tamper-protected</li>
<li><strong>UUID inclusion</strong>: Unique identification within encrypted payload</li>
</ul>
<h2>Custom Payload Guidelines</h2>
<ul>
<li>Use arrays for structured data storage</li>
<li>Avoid sensitive data that shouldn't be in tokens</li>
<li>Consider payload size impact on token length</li>
<li>Ensure JSON-serializable data types only</li>
</ul>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$secondsToExpire</span>
                : <span class="phpdocumentor-signature__argument__return-type">int</span>
                 = <span class="phpdocumentor-signature__argument__default-value">60</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Time-to-live in seconds before token expires (default: 60)</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$customContents</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                 = <span class="phpdocumentor-signature__argument__default-value">[]</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Custom data to store in token payload (default: empty)</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_makeShareableToken#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link"><abbr title="\Exception">Exception</abbr></span>
                                                            
                                                 <section class="phpdocumentor-description"><p>If Cargo operations or encryption fail</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>Password Reset Token</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$resetToken = $token-&gt;makeShareableToken(1800, [ // 30 minutes
    'user_id' =&gt; 123,
    'email' =&gt; 'user@example.com',
    'action' =&gt; 'password_reset',
    'security_code' =&gt; bin2hex(random_bytes(16))
]);

// Send $resetToken via email
$resetUrl = &quot;https://example.com/reset?token=&quot; . urlencode($resetToken);
</code></pre>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><p>API Access Token</p>
<pre class="prettyprint"><code class="language-php">$token = new Token();
$apiToken = $token-&gt;makeShareableToken(86400, [ // 24 hours
    'client_id' =&gt; 'app_12345',
    'scopes' =&gt; ['read', 'write', 'delete'],
    'rate_limit' =&gt; 1000,
    'user_context' =&gt; ['role' =&gt; 'admin', 'tenant' =&gt; 'acme_corp']
]);

// Return in API response
return json_encode(['access_token' =&gt; $apiToken, 'expires_in' =&gt; 86400]);
</code></pre>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Security-Crypto.html#method_encrypt"><abbr title="\Primordyx\Security\Crypto::encrypt()">Crypto::encrypt()</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For encryption implementation</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\asJson()">asJson()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For JSON serialization process</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\getShareableToken()">getShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For retrieving encrypted token string</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">string</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>AES-256-GCM encrypted token string safe for public distribution</p>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -protected
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_reset">
        reset()
        <a href="classes/Primordyx-Security-Token.html#method_reset" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/Security/Token.php"><a href="files/src-security-token.html"><abbr title="src/Security/Token.php">Token.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">580</span>

    </aside>

        <p class="phpdocumentor-summary">Reset internal state and mark token as dirty and invalid</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">protected</span>
                    <span class="phpdocumentor-signature__name">reset</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Clears all token data, flushes Cargo container, and resets token to
invalid state. Used internally during error handling and state cleanup
operations.</p>
<h2>Reset Operations</h2>
<ol>
<li><strong>Cargo flush</strong>: Clear all data from Cargo container</li>
<li><strong>Encryption invalidation</strong>: Mark encryption as invalid</li>
<li><strong>State marking</strong>: Set token as dirty (modified state)</li>
<li><strong>State isolation</strong>: Preserve UUID and other instance properties</li>
</ol>
<h2>Reset Triggers</h2>
<ul>
<li><strong>Decryption failure</strong>: Invalid encrypted token during loading</li>
<li><strong>JSON parsing failure</strong>: Corrupted data during token loading</li>
<li><strong>Error recovery</strong>: State cleanup after operation failures</li>
<li><strong>Manual cleanup</strong>: Explicit token state reset</li>
</ul>
<h2>State After Reset</h2>
<ul>
<li>Token marked invalid (encryptionIsValid = false)</li>
<li>Token marked dirty (isDirty = true)</li>
<li>Cargo container emptied but preserved</li>
<li>UUID and UTC preference maintained</li>
<li>Shareable token cleared or marked as invalid</li>
</ul>
</section>

    
    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/Primordyx-Security-Token.html#method_reset#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">since</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                            <span class="phpdocumentor-tag-link">1.0.0</span>
                                                                                
                                             
                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><abbr title="\Primordyx\Security\loadFromShareableToken()">loadFromShareableToken()</abbr></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For reset usage during loading failures</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">see</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                    <span class="phpdocumentor-tag-link"><a href="classes/Primordyx-Data-Cargo.html#method_flush"><abbr title="\Primordyx\Data\Cargo::flush()">Cargo::flush()</abbr></a></span>
                                        
                                                 <section class="phpdocumentor-description"><p>For cargo container clearing operation</p>
</section>

                                    </dd>
                                            </dl>

    

    
</article>
            </section>

        <div class="phpdocumentor-modal" id="source-view">
    <div class="phpdocumentor-modal-bg" data-exit-button></div>
    <div class="phpdocumentor-modal-container">
        <div class="phpdocumentor-modal-content">
            <pre style="max-height: 500px; overflow-y: scroll" data-src="files/src/Security/Token.php.txt" class="language-php line-numbers linkable-line-numbers"></pre>
        </div>
        <button data-exit-button class="phpdocumentor-modal__close">&times;</button>
    </div>
</div>

    <script type="text/javascript">
        (function () {
            function loadExternalCodeSnippet(el, url, line) {
                Array.prototype.slice.call(el.querySelectorAll('pre[data-src]')).forEach((pre) => {
                    const src = url || pre.getAttribute('data-src').replace(/\\/g, '/');
                    const language = 'php';

                    const code = document.createElement('code');
                    code.className = 'language-' + language;
                    pre.textContent = '';
                    pre.setAttribute('data-line', line)
                    code.textContent = 'Loading…';
                    pre.appendChild(code);

                    var xhr = new XMLHttpRequest();

                    xhr.open('GET', src, true);

                    xhr.onreadystatechange = function () {
                        if (xhr.readyState !== 4) {
                            return;
                        }

                        if (xhr.status < 400 && xhr.responseText) {
                            code.textContent = xhr.responseText;
                            Prism.highlightElement(code);
                            d=document.getElementsByClassName("line-numbers");
                            d[0].scrollTop = d[0].children[1].offsetTop;
                            return;
                        }

                        if (xhr.status === 404) {
                            code.textContent = '✖ Error: File could not be found';
                            return;
                        }

                        if (xhr.status >= 400) {
                            code.textContent = '✖ Error ' + xhr.status + ' while fetching file: ' + xhr.statusText;
                            return;
                        }

                        code.textContent = '✖ Error: An unknown error occurred';
                    };

                    xhr.send(null);
                });
            }

            const modalButtons = document.querySelectorAll("[data-modal]");
            const openedAsLocalFile = window.location.protocol === 'file:';
            if (modalButtons.length > 0 && openedAsLocalFile) {
                console.warn(
                    'Viewing the source code is unavailable because you are opening this page from the file:// scheme; ' +
                    'browsers block XHR requests when a page is opened this way'
                );
            }

            modalButtons.forEach(function (trigger) {
                if (openedAsLocalFile) {
                    trigger.setAttribute("hidden", "hidden");
                }

                trigger.addEventListener("click", function (event) {
                    event.preventDefault();
                    const modal = document.getElementById(trigger.dataset.modal);
                    if (!modal) {
                        console.error(`Modal with id "${trigger.dataset.modal}" could not be found`);
                        return;
                    }
                    modal.classList.add("phpdocumentor-modal__open");

                    loadExternalCodeSnippet(modal, trigger.dataset.src || null, trigger.dataset.line)
                    const exits = modal.querySelectorAll("[data-exit-button]");
                    exits.forEach(function (exit) {
                        exit.addEventListener("click", function (event) {
                            event.preventDefault();
                            modal.classList.remove("phpdocumentor-modal__open");
                        });
                    });
                });
            });
        })();
    </script>

    </article>
                                </section>
                <section class="phpdocumentor-on-this-page__sidebar">
                                
    <section class="phpdocumentor-on-this-page__content">
        <strong class="phpdocumentor-on-this-page__title">On this page</strong>

        <ul class="phpdocumentor-list -clean">
            <li class="phpdocumentor-on-this-page-section__title">Table Of Contents</li>
            <li>
                <ul class="phpdocumentor-list -clean">
                                                            <li><a href="classes/Primordyx-Security-Token.html#toc-properties">Properties</a></li>
                                                            <li><a href="classes/Primordyx-Security-Token.html#toc-methods">Methods</a></li>
                                    </ul>
            </li>
            
                            <li class="phpdocumentor-on-this-page-section__title">Properties</li>
                <li>
                    <ul class="phpdocumentor-list -clean">
                                                    <li class=""><a href="classes/Primordyx-Security-Token.html#property_cargo">$cargo</a></li>
                                                    <li class=""><a href="classes/Primordyx-Security-Token.html#property_encryptionIsValid">$encryptionIsValid</a></li>
                                                    <li class=""><a href="classes/Primordyx-Security-Token.html#property_isDirty">$isDirty</a></li>
                                                    <li class=""><a href="classes/Primordyx-Security-Token.html#property_shareableToken">$shareableToken</a></li>
                                                    <li class=""><a href="classes/Primordyx-Security-Token.html#property_useUTC">$useUTC</a></li>
                                                    <li class=""><a href="classes/Primordyx-Security-Token.html#property_uuid">$uuid</a></li>
                                            </ul>
                </li>
            
                        <li class="phpdocumentor-on-this-page-section__title">Methods</li>
            <li>
                <ul class="phpdocumentor-list -clean">
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method___construct">__construct()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_asArray">asArray()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_asJson">asJson()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_cargoIsDirty">cargoIsDirty()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_expiresAt">expiresAt()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_getCargo">getCargo()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_getShareableToken">getShareableToken()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_getUuid">getUuid()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_isDirty">isDirty()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_isExpired">isExpired()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_isValid">isValid()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_loadFromShareableToken">loadFromShareableToken()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_makeShareableToken">makeShareableToken()</a></li>
                                            <li class=""><a href="classes/Primordyx-Security-Token.html#method_reset">reset()</a></li>
                                    </ul>
            </li>
                    </ul>
    </section>

                </section>
                            </div>
            <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
        </div>
        <a href="classes/Primordyx-Security-Token.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>
